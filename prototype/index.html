<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OITH - One In The Hand</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="A bird in the hand is worth two in the bush - One quality match at a time">
    <meta name="theme-color" content="#C4584A">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="OITH">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- App Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script>
        // Handle direct screen navigation via URL parameter (for screen overview)
        // This runs early to inject CSS before body renders
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const screenParam = urlParams.get('screen');
            if (screenParam) {
                document.write('<style>.screen{display:none!important;opacity:0!important;visibility:hidden!important;}.screen#' + screenParam + '{display:flex!important;opacity:1!important;visibility:visible!important;transform:none!important;}</style>');
            }
        })();
    </script>
</head>
<body>
    <div class="phone-frame">
        <div class="app-container">
            <!-- Splash Screen -->
            <div class="screen splash-screen active" id="splash">
                <div class="splash-content">
                    <div class="logo-container">
                        <div class="logo-icon">
                            <!-- Bird in Hand Logo - based on "A bird in the hand is worth two in the bush" -->
                            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="47" stroke="currentColor" stroke-width="1.5" stroke-dasharray="3 3" opacity="0.4"/>
                                <!-- Hand silhouette -->
                                <path d="M30 70 C25 65, 23 55, 28 45 C33 35, 42 28, 52 28 C62 28, 71 35, 76 45 C81 55, 79 65, 74 72 C66 80, 55 83, 52 82 C49 83, 38 80, 30 70Z" 
                                      fill="var(--accent-light, #F5E6E3)" stroke="currentColor" stroke-width="1.5"/>
                                <!-- Bird body -->
                                <ellipse cx="52" cy="44" rx="15" ry="11" fill="currentColor"/>
                                <!-- Bird head -->
                                <circle cx="62" cy="36" r="7" fill="currentColor"/>
                                <!-- Bird beak -->
                                <path d="M69 36 L76 34 L69 39Z" fill="var(--accent-dark, #A84639)"/>
                                <!-- Bird eye -->
                                <circle cx="64" cy="35" r="1.5" fill="white"/>
                                <!-- Bird wing detail -->
                                <path d="M42 42 Q52 38, 60 44" stroke="var(--accent-dark, #A84639)" stroke-width="1.5" fill="none"/>
                                <!-- Bird tail -->
                                <path d="M37 44 L28 40 L33 50 L37 47Z" fill="var(--accent-dark, #A84639)"/>
                                <!-- Cupping hands -->
                                <path d="M38 55 C33 62, 38 70, 46 75" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <path d="M66 55 C71 62, 66 70, 58 75" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                                <!-- Small heart -->
                                <path d="M52 60 C50 57, 46 57, 46 60 C46 62, 52 67, 52 67 C52 67, 58 62, 58 60 C58 57, 54 57, 52 60Z" fill="currentColor" opacity="0.5"/>
                            </svg>
                        </div>
                        <h1 class="logo-text">OITH</h1>
                        <p class="logo-tagline">One In The Hand</p>
                    </div>
                    <p class="splash-subtitle">This time it's personal</p>
                    <button class="btn btn-primary" onclick="showScreen('onboarding-1')">Get Started</button>
                    <button class="btn btn-text" onclick="showScreen('login')">I already have an account</button>
                </div>
                <div class="splash-decoration"></div>
            </div>

            <!-- Login Screen -->
            <div class="screen login-screen" id="login">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('splash')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                </div>
                <div class="login-content">
                    <h2>Welcome back</h2>
                    <p class="subtitle">Your next great date awaits</p>
                    <form class="login-form" onsubmit="return handleLogin(event)">
                        <div class="input-group">
                            <label>Email</label>
                            <input type="email" id="loginEmail" placeholder="you@example.com" required>
                        </div>
                        <div class="input-group">
                            <label>Password</label>
                            <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Sign In</button>
                    </form>
                    <a class="forgot-link" onclick="showForgotPassword()">Forgot password?</a>
                    <p class="signup-link">Don't have an account? <a onclick="showScreen('signup')">Sign up</a></p>
                    
                    <!-- Demo Account Hint -->
                    <div class="demo-hint" style="margin-top: 20px; padding: 12px; background: rgba(193, 127, 116, 0.1); border-radius: 8px; border: 1px dashed rgba(193, 127, 116, 0.3);">
                        <p style="font-size: 0.75rem; color: #8b7355; margin: 0 0 6px 0; font-weight: 600;">ðŸ”‘ Demo Account</p>
                        <p style="font-size: 0.7rem; color: #a08060; margin: 0; line-height: 1.4;">
                            <strong>Email:</strong> demo@oith.com<br>
                            <strong>Password:</strong> Demo123!
                        </p>
                    </div>
                    
                </div>
            </div>

            <!-- Onboarding Step 1 -->
            <div class="screen onboarding-screen" id="onboarding-1">
                <div class="onboarding-progress">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>
                <div class="onboarding-content">
                    <div class="onboarding-illustration">
                        <div class="illustration-circle">
                            <svg viewBox="0 0 120 120" fill="none">
                                <!-- One Bird In Hand illustration -->
                                <circle cx="60" cy="60" r="50" stroke="var(--accent)" stroke-width="2" stroke-dasharray="8 4"/>
                                <circle cx="60" cy="60" r="40" fill="var(--accent-light)"/>
                                <!-- Hand holding bird -->
                                <path d="M35 80 C28 72, 26 58, 32 46 C38 34, 50 26, 62 26 C74 26, 86 34, 92 46 C98 58, 96 72, 89 82 C80 92, 66 96, 62 94 C58 96, 44 92, 35 80Z" 
                                      fill="white" stroke="var(--accent)" stroke-width="2"/>
                                <!-- Bird body -->
                                <ellipse cx="62" cy="50" rx="18" ry="13" fill="var(--accent)"/>
                                <!-- Bird head -->
                                <circle cx="74" cy="40" r="9" fill="var(--accent)"/>
                                <!-- Bird beak -->
                                <path d="M83 40 L92 37 L83 44Z" fill="#A84639"/>
                                <!-- Bird eye -->
                                <circle cx="76" cy="39" r="2" fill="white"/>
                                <!-- Bird wing -->
                                <path d="M50 47 Q62 42, 72 50" stroke="#A84639" stroke-width="2" fill="none"/>
                                <!-- Bird tail -->
                                <path d="M44 50 L32 45 L38 56 L44 52Z" fill="#A84639"/>
                                <!-- Cupping gesture -->
                                <path d="M45 66 C38 74, 44 84, 54 90" stroke="var(--accent)" stroke-width="2" fill="none" stroke-linecap="round"/>
                                <path d="M79 66 C86 74, 80 84, 70 90" stroke="var(--accent)" stroke-width="2" fill="none" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </div>
                    <h2>One match at a time</h2>
                    <p>A bird in the hand is worth two in the bush. Focus on who's in front of youâ€”not endless options.</p>
                </div>
                <div class="onboarding-footer">
                    <button class="btn btn-primary" onclick="showScreen('onboarding-2')">Continue</button>
                    <button class="btn btn-text" onclick="showScreen('signup')">Skip intro</button>
                </div>
            </div>

            <!-- Onboarding Step 2 -->
            <div class="screen onboarding-screen" id="onboarding-2">
                <div class="onboarding-progress">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                </div>
                <div class="onboarding-content">
                    <div class="onboarding-illustration">
                        <div class="illustration-circle">
                            <svg viewBox="0 0 120 120" fill="none">
                                <rect x="25" y="30" width="70" height="60" rx="8" stroke="var(--accent)" stroke-width="2"/>
                                <circle cx="60" cy="55" r="15" fill="var(--accent-light)"/>
                                <path d="M45 75h30" stroke="var(--accent)" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="85" cy="75" r="12" fill="var(--accent)"/>
                                <path d="M81 75l3 3 5-6" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <h2>Serious daters only</h2>
                    <p>Everyone pays to be here. That means you're connecting with people who are genuinely invested in finding someone.</p>
                </div>
                <div class="onboarding-footer">
                    <button class="btn btn-primary" onclick="showScreen('onboarding-3')">Continue</button>
                    <button class="btn btn-text" onclick="showScreen('signup')">Skip intro</button>
                </div>
            </div>

            <!-- Onboarding Step 3 -->
            <div class="screen onboarding-screen" id="onboarding-3">
                <div class="onboarding-progress">
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot completed"></div>
                    <div class="progress-dot active"></div>
                </div>
                <div class="onboarding-content">
                    <div class="onboarding-illustration">
                        <div class="illustration-circle">
                            <svg viewBox="0 0 120 120" fill="none">
                                <path d="M30 70c0-20 15-35 30-35s30 15 30 35" stroke="var(--accent)" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="40" cy="80" r="8" fill="var(--accent-light)"/>
                                <circle cx="80" cy="80" r="8" fill="var(--accent-light)"/>
                                <path d="M48 80h24" stroke="var(--accent)" stroke-width="2" stroke-dasharray="4 4"/>
                                <rect x="45" y="90" width="30" height="20" rx="4" fill="var(--accent)"/>
                                <path d="M52 97h16M52 103h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                    </div>
                    <h2>From chat to date</h2>
                    <p>Our built-in date planner helps you pick venues and times. We're designed to get you off the app and into real life.</p>
                </div>
                <div class="onboarding-footer">
                    <button class="btn btn-primary" onclick="showScreen('signup')">Create Account</button>
                </div>
            </div>

            <!-- Signup Screen -->
            <div class="screen signup-screen" id="signup">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('onboarding-3')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="header-step">Step 1 of 5</span>
                </div>
                <div class="signup-content">
                    <h2>Let's start with the basics</h2>
                    <form class="signup-form" onsubmit="handleSignupStep1(event)">
                        <div class="input-group">
                            <label>First name</label>
                            <input type="text" id="firstName" placeholder="Your first name" required>
                        </div>
                        <div class="input-group">
                            <label>Email</label>
                            <input type="email" id="signupEmail" placeholder="you@example.com" required>
                        </div>
                        <div class="input-group">
                            <label>Password</label>
                            <input type="password" id="signupPassword" placeholder="At least 8 characters" required minlength="8">
                        </div>
                        <div class="input-group">
                            <label>Birthday</label>
                            <input type="date" id="birthday" required onchange="calculateAndDisplayAge('birthday', 'signupAgeDisplay')">
                            <div id="signupAgeDisplay" style="margin-top: 6px; font-size: 0.85rem; color: var(--accent); font-weight: 500;"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Continue</button>
                    </form>
                </div>
            </div>

            <!-- Profile Setup -->
            <div class="screen profile-setup-screen" id="profile-setup">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('profile-details')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="header-step">Step 4 of 5</span>
                </div>
                <div class="profile-setup-content">
                    <h2>Add your photos</h2>
                    <p class="subtitle">Add at least 2 photos to continue (up to 6)</p>
                    
                    <!-- Hidden file input for gallery access -->
                    <input type="file" id="setupPhotoInput" accept="image/*" style="display: none;" onchange="handleSetupPhotoSelect(event)">
                    
                    <div class="photo-grid setup-photo-grid" id="setupPhotoGrid">
                        <div class="photo-slot main-photo" id="setupPhotoSlot0" onclick="selectSetupPhoto(0)">
                            <div class="photo-placeholder">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M21 15l-5-5L5 21"/>
                                </svg>
                                <span>Main photo</span>
                            </div>
                        </div>
                        <div class="photo-slot" id="setupPhotoSlot1" onclick="selectSetupPhoto(1)">
                            <div class="photo-placeholder">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                            </div>
                        </div>
                        <div class="photo-slot" id="setupPhotoSlot2" onclick="selectSetupPhoto(2)">
                            <div class="photo-placeholder">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                            </div>
                        </div>
                        <div class="photo-slot" id="setupPhotoSlot3" onclick="selectSetupPhoto(3)">
                            <div class="photo-placeholder">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                            </div>
                        </div>
                        <div class="photo-slot" id="setupPhotoSlot4" onclick="selectSetupPhoto(4)">
                            <div class="photo-placeholder">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                    </div>
                        </div>
                        <div class="photo-slot" id="setupPhotoSlot5" onclick="selectSetupPhoto(5)">
                            <div class="photo-placeholder">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <p class="photo-count" id="setupPhotoCount">0 of 6 photos added</p>
                    
                    <button class="btn btn-primary" id="setupContinueBtn" onclick="continueFromPhotoSetup()" disabled>Add at least 2 photos to continue</button>
                </div>
            </div>

            <!-- Profile Details Screen (New user setup) -->
            <div class="screen profile-details-screen" id="profile-details">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('preferences')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="header-step">Step 3 of 5</span>
                </div>
                <div class="profile-details-content" style="padding: 20px; overflow-y: auto; max-height: calc(100vh - 120px);">
                    <h2 style="margin-bottom: 8px;">Complete Your Profile</h2>
                    <p class="subtitle" style="color: var(--text-muted); margin-bottom: 24px;">Help us find your perfect match</p>
                    
                    <!-- Gender Selection -->
                    <div class="edit-section" style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">I am a...</h4>
                        <div class="toggle-group" id="setupGenderGroup" style="display: flex; gap: 10px;">
                            <button class="toggle-btn" data-value="male" onclick="selectSetupGender('male')">Man</button>
                            <button class="toggle-btn" data-value="female" onclick="selectSetupGender('female')">Woman</button>
                            <button class="toggle-btn" data-value="non-binary" onclick="selectSetupGender('non-binary')">Non-binary</button>
                        </div>
                    </div>

                    <!-- Location -->
                    <div class="input-group" style="margin-bottom: 20px;">
                        <label>Location</label>
                        <input type="text" id="setupLocation" placeholder="City, State" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                    </div>

                    <!-- Work & Education -->
                    <div class="edit-section" style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Work & Education</h4>
                        <div class="input-group" style="margin-bottom: 12px;">
                            <label>Occupation</label>
                            <input type="text" id="setupOccupation" placeholder="What do you do?" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                        </div>
                        <div class="input-group">
                            <label>Education Level</label>
                            <select id="setupEducation" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                <option value="">Select education level</option>
                                <option value="high-school">High School</option>
                                <option value="some-college">Some College</option>
                                <option value="associates">Associate's Degree</option>
                                <option value="bachelors">Bachelor's Degree</option>
                                <option value="masters">Master's Degree</option>
                                <option value="doctorate">Doctorate</option>
                                <option value="trade">Trade School</option>
                            </select>
                        </div>
                    </div>

                    <!-- Physical Attributes -->
                    <div class="edit-section" style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">About You</h4>
                        <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                            <div class="input-group" style="flex: 1;">
                                <label>Height</label>
                                <select id="setupHeight" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="5'0">5'0"</option>
                                    <option value="5'1">5'1"</option>
                                    <option value="5'2">5'2"</option>
                                    <option value="5'3">5'3"</option>
                                    <option value="5'4">5'4"</option>
                                    <option value="5'5">5'5"</option>
                                    <option value="5'6">5'6"</option>
                                    <option value="5'7">5'7"</option>
                                    <option value="5'8">5'8"</option>
                                    <option value="5'9">5'9"</option>
                                    <option value="5'10">5'10"</option>
                                    <option value="5'11">5'11"</option>
                                    <option value="6'0">6'0"</option>
                                    <option value="6'1">6'1"</option>
                                    <option value="6'2">6'2"</option>
                                    <option value="6'3">6'3"</option>
                                    <option value="6'4">6'4"</option>
                                    <option value="6'5+">6'5"+</option>
                                </select>
                            </div>
                            <div class="input-group" style="flex: 1;">
                                <label>Body Type</label>
                                <select id="setupBodyType" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="slim">Slim</option>
                                    <option value="athletic">Athletic</option>
                                    <option value="average">Average</option>
                                    <option value="curvy">Curvy</option>
                                    <option value="muscular">Muscular</option>
                                    <option value="plus-size">Plus Size</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Lifestyle -->
                    <div class="edit-section" style="margin-bottom: 24px;">
                        <h4 style="margin-bottom: 12px;">Lifestyle</h4>
                        <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                            <div class="input-group" style="flex: 1;">
                                <label>Drinking</label>
                                <select id="setupDrinking" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="never">Never</option>
                                    <option value="rarely">Rarely</option>
                                    <option value="socially">Socially</option>
                                    <option value="regularly">Regularly</option>
                                </select>
                            </div>
                            <div class="input-group" style="flex: 1;">
                                <label>Smoking</label>
                                <select id="setupSmoking" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="never">Never</option>
                                    <option value="sometimes">Sometimes</option>
                                    <option value="regularly">Regularly</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <div class="input-group" style="flex: 1;">
                                <label>Exercise</label>
                                <select id="setupExercise" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="never">Never</option>
                                    <option value="sometimes">Sometimes</option>
                                    <option value="regularly">Regularly</option>
                                    <option value="daily">Daily</option>
                                </select>
                            </div>
                            <div class="input-group" style="flex: 1;">
                                <label>Children</label>
                                <select id="setupChildren" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                                    <option value="">Select</option>
                                    <option value="no-dont-want">Don't have, don't want</option>
                                    <option value="no-maybe">Don't have, open to it</option>
                                    <option value="no-want">Don't have, want someday</option>
                                    <option value="yes">Have children</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Religion -->
                    <div class="input-group" style="margin-bottom: 20px;">
                        <label>Religion</label>
                        <select id="setupReligion" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary);">
                            <option value="">Prefer not to say</option>
                            <option value="agnostic">Agnostic</option>
                            <option value="atheist">Atheist</option>
                            <option value="buddhist">Buddhist</option>
                            <option value="catholic">Catholic</option>
                            <option value="christian">Christian</option>
                            <option value="hindu">Hindu</option>
                            <option value="jewish">Jewish</option>
                            <option value="muslim">Muslim</option>
                            <option value="spiritual">Spiritual</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <!-- Bio -->
                    <div class="input-group" style="margin-bottom: 24px;">
                        <label>Bio <span style="color: var(--text-muted); font-size: 0.85rem;">(Tell potential matches about yourself)</span></label>
                        <textarea id="setupBio" placeholder="Share what makes you unique..." rows="4" style="width: 100%; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg-primary); resize: none;"></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="continueFromProfileDetails()" style="width: 100%;">Continue</button>
                </div>
            </div>

            <!-- Preferences Screen -->
            <div class="screen preferences-screen" id="preferences">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('signup')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="header-step">Step 2 of 5</span>
                </div>
                <div class="preferences-content">
                    <h2>What are you looking for?</h2>
                    <div class="preference-section">
                        <label class="preference-label">I'm interested in</label>
                        <div class="toggle-group">
                            <button class="toggle-btn" data-value="women">Women</button>
                            <button class="toggle-btn" data-value="men">Men</button>
                            <button class="toggle-btn active" data-value="everyone">Everyone</button>
                        </div>
                    </div>
                    <div class="preference-section">
                        <label class="preference-label">Looking for</label>
                        <div class="toggle-group">
                            <button class="toggle-btn active" data-value="relationship">Long-term</button>
                            <button class="toggle-btn" data-value="casual">Casual</button>
                        </div>
                    </div>
                    <div class="preference-section">
                        <label class="preference-label">Age range</label>
                        <div class="range-display">
                            <span id="minAge">25</span> - <span id="maxAge">35</span> years
                        </div>
                        <div class="range-slider">
                            <div class="range-slider-track" id="ageTrack"></div>
                            <input type="range" id="ageMin" min="18" max="60" value="25" oninput="updateAgeRange()">
                            <input type="range" id="ageMax" min="18" max="60" value="35" oninput="updateAgeRange()">
                        </div>
                    </div>
                    <div class="preference-section">
                        <label class="preference-label">Maximum distance</label>
                        <div class="range-display">
                            <span id="distanceValue">25</span> miles
                        </div>
                        <input type="range" id="distance" min="5" max="100" value="25" class="single-range" oninput="updateDistance()">
                    </div>
                    <button class="btn btn-primary" onclick="showScreen('profile-details')">Continue</button>
                </div>
            </div>

            <!-- Payment Screen -->
            <div class="screen payment-screen" id="payment">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('profile-setup')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="header-step">Step 5 of 5</span>
                </div>
                <div class="payment-content" id="paymentFormView">
                    <h2>Choose Your Plan</h2>
                    <p class="subtitle">Start finding meaningful connections today</p>
                    
                    <!-- Single Plan Option -->
                    <div class="plan-options" style="display: flex; flex-direction: column; gap: 12px; margin: 20px 0;">
                        <!-- Monthly Plan - Only Option -->
                        <div class="plan-card selected" id="plan-monthly" style="border: 2px solid var(--accent); border-radius: 16px; padding: 24px; position: relative; background: rgba(196, 88, 74, 0.05);">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 style="margin: 0; font-size: 1.2rem;">Premium Membership</h3>
                                    <p style="margin: 8px 0 0; color: var(--text-muted); font-size: 0.9rem;">Cancel anytime â€¢ Full access</p>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 2rem; font-weight: 700; color: var(--accent);">$10</div>
                                    <div style="font-size: 0.85rem; color: var(--text-muted);">per month</div>
                                </div>
                            </div>
                            <div class="plan-check" style="position: absolute; top: 12px; right: 12px; width: 24px; height: 24px; background: var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </div>
                        </div>
                    </div>

                    <!-- Features List -->
                    <div class="pricing-card" style="background: var(--bg-secondary); border-radius: 16px; padding: 20px; margin-bottom: 20px;">
                        <h4 style="margin: 0 0 16px; font-size: 0.9rem; color: var(--text-secondary);">âœ¨ Premium Features Included</h4>
                        <ul class="features-list" style="margin: 0; padding: 0; list-style: none;">
                            <li style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                ðŸ’• Unlimited matches per day
                            </li>
                            <li style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                ðŸ‘€ See who likes your profile
                            </li>
                            <li style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                ðŸŽ¯ AI-powered match suggestions
                            </li>
                            <li style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                ðŸ“… Built-in date planner
                            </li>
                            <li style="display: flex; align-items: center; gap: 10px; font-size: 0.9rem;">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                ðŸ”’ Verified profiles only
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Test Mode Banner -->
                    <div id="testModeBanner" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 16px; border-radius: 12px; margin-bottom: 16px; display: none;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span style="font-size: 1.2rem;">ðŸ§ª</span>
                            <div>
                                <div style="font-weight: 600; font-size: 0.9rem;">Test Mode Active</div>
                                <div style="font-size: 0.75rem; opacity: 0.9;">No real charges - for development only</div>
                            </div>
                </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showPaymentForm()" id="subscribeBtn" style="width: 100%; padding: 16px; font-size: 1rem; font-weight: 600;">
                        <span id="subscribeBtnText">Continue to Payment</span>
                        <span id="subscribeBtnPrice" style="opacity: 0.9;"> - $10.00/month</span>
                    </button>
                    <p class="payment-note" style="text-align: center; margin-top: 12px; font-size: 0.8rem; color: var(--text-muted);">
                        ðŸ”’ Secure payment via Stripe â€¢ Cancel anytime â€¢ 7-day money-back guarantee
                    </p>
                    
                    <!-- Payment Method Icons -->
                    <div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px; opacity: 0.6;">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/visa.svg" alt="Visa" height="24">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/mastercard.svg" alt="Mastercard" height="24">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/amex.svg" alt="Amex" height="24">
                        <span style="padding: 4px 8px; background: var(--bg-secondary); border-radius: 4px; font-size: 0.7rem; font-weight: 600;">Apple Pay</span>
                        <span style="padding: 4px 8px; background: var(--bg-secondary); border-radius: 4px; font-size: 0.7rem; font-weight: 600;">Google Pay</span>
                    </div>
                </div>
                
                <!-- Payment Details Form View -->
                <div class="payment-content" id="paymentDetailsView" style="display: none;">
                    <button class="back-link" onclick="showPlanSelection()" style="background: none; border: none; color: var(--text-muted); font-size: 0.9rem; cursor: pointer; margin-bottom: 16px; display: flex; align-items: center; gap: 4px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Back to plan
                    </button>
                    
                    <h2>Payment Details</h2>
                    <p class="subtitle" style="margin-bottom: 24px;">Complete your subscription to start matching</p>
                    
                    <!-- Order Summary -->
                    <div style="background: var(--bg-secondary); border-radius: 12px; padding: 16px; margin-bottom: 24px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">Premium Membership</div>
                                <div style="font-size: 0.85rem; color: var(--text-muted);">Monthly subscription</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 1.25rem; font-weight: 700; color: var(--accent);">$10.00</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">/month</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Card Details Form -->
                    <form id="paymentCardForm" onsubmit="processPayment(event)">
                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px;">Cardholder Name</label>
                            <input type="text" id="cardName" placeholder="Name on card" required style="width: 100%; padding: 14px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 1rem;">
                        </div>
                        
                        <div class="form-group" style="margin-bottom: 16px;">
                            <label style="display: block; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px;">Card Number</label>
                            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required maxlength="19" oninput="formatCardNumber(this)" style="width: 100%; padding: 14px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 1rem; letter-spacing: 2px;">
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px;">
                            <div class="form-group">
                                <label style="display: block; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px;">Expiry Date</label>
                                <input type="text" id="cardExpiry" placeholder="MM/YY" required maxlength="5" oninput="formatExpiry(this)" style="width: 100%; padding: 14px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 1rem;">
                            </div>
                            <div class="form-group">
                                <label style="display: block; font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 8px;">CVV</label>
                                <input type="text" id="cardCvv" placeholder="123" required maxlength="4" style="width: 100%; padding: 14px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; color: var(--text-primary); font-size: 1rem;">
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 16px; font-size: 1rem; font-weight: 600;">
                            Pay $10.00 & Subscribe
                        </button>
                    </form>
                    
                    <p style="text-align: center; margin-top: 16px; font-size: 0.8rem; color: var(--text-muted);">
                        ðŸ”’ Your payment is secured with 256-bit encryption
                    </p>
                    
                    <!-- Payment Method Icons -->
                    <div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px; opacity: 0.6;">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/visa.svg" alt="Visa" height="20">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/mastercard.svg" alt="Mastercard" height="20">
                        <img src="https://cdn.jsdelivr.net/gh/nicehero/nicehero.github.io@master/img/amex.svg" alt="Amex" height="20">
                    </div>
                </div>
                
                <!-- Payment Processing View -->
                <div class="payment-content" id="paymentProcessingView" style="display: none; text-align: center; padding: 60px 20px;">
                    <div class="processing-animation" style="margin-bottom: 24px;">
                        <div style="width: 60px; height: 60px; border: 4px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
                    </div>
                    <h2>Processing Payment...</h2>
                    <p class="subtitle">Please wait while we securely process your payment</p>
                </div>
                
                <!-- Payment Success View -->
                <div class="payment-content" id="paymentSuccessView" style="display: none; text-align: center; padding: 40px 20px;">
                    <div style="font-size: 64px; margin-bottom: 20px;">ðŸŽ‰</div>
                    <h2 style="color: var(--success); margin-bottom: 12px;">Payment Successful!</h2>
                    <p class="subtitle" style="margin-bottom: 24px;">Welcome to OITH! Your account is now active.</p>
                    <div style="background: var(--bg-secondary); border-radius: 12px; padding: 20px; margin-bottom: 24px; text-align: left;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-muted);">Plan</span>
                            <span style="font-weight: 500;">Premium Monthly</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-muted);">Amount</span>
                            <span style="font-weight: 500;">$10.00</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-muted);">Next billing</span>
                            <span style="font-weight: 500;" id="nextBillingDate">-</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="completeSignup()" style="width: 100%;">Start Finding Your Match! ðŸ’•</button>
                </div>
                
                <style>
                    @keyframes spin {
                        to { transform: rotate(360deg); }
                    }
                </style>
            </div>

            <!-- Main App - Match Screen -->
            <div class="screen match-screen" id="match">
                <div class="app-header">
                    <div class="logo-small">OITH</div>
                    <div class="header-icons">
                        <button class="icon-btn" onclick="showScreen('settings')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- New Match Found State -->
                <div class="match-content match-pending" id="matchPendingView">
                    <div class="new-match-announcement">
                        <div class="match-found-animation">
                            <div class="pulse-ring"></div>
                            <div class="pulse-ring delay-1"></div>
                            <div class="match-found-icon">ðŸ’•</div>
                        </div>
                        <h2>New Match Found!</h2>
                        <p class="match-found-subtitle">Our AI found someone special for you</p>
                    </div>
                    
                    <!-- 24-Hour Decision Timer -->
                    <div class="decision-timer-banner">
                        <div class="decision-timer-icon">â±ï¸</div>
                        <div class="decision-timer-info">
                            <span class="decision-timer-label">Time to decide</span>
                            <span class="decision-timer-value" id="decisionTimeLimit">23:59:59</span>
                        </div>
                        <div class="decision-timer-note">Your profile is hidden while reviewing</div>
                    </div>
                    
                    <div class="match-preview-card" id="matchPreviewCard">
                        <div class="preview-photo-container">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=500&fit=crop" alt="Match photo" class="preview-photo" id="matchPreviewPhoto">
                            <div class="compatibility-badge" onclick="showCompatibilityBreakdown()" title="Tap to see breakdown">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                                </svg>
                                <span id="matchBadgeCompatibility">92%</span>
                            </div>
                        </div>
                        <div class="preview-info">
                            <h3 id="matchPreviewName">Sarah, 28</h3>
                            <p class="preview-occupation" id="matchPreviewOccupation">Product Designer</p>
                            <p class="preview-details" style="color: var(--text-muted); font-size: 0.9rem; margin: 4px 0;">
                                <span id="matchPreviewHeight">5'6"</span> â€¢ <span id="matchPreviewCity">New York, NY</span> â€¢ <span id="matchPreviewDistance">3 mi away</span>
                            </p>
                            <div class="preview-highlights">
                                <span class="highlight-item" id="matchPreviewGoals">ðŸ’• Same goals</span>
                                <span class="highlight-item" id="matchPreviewInterests">ðŸŽ¯ 4 shared interests</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="match-decision-actions">
                        <button class="decision-btn decline" onclick="declineMatch()" title="Pass on this match">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                        <button class="decision-btn accept" onclick="acceptMatch()" title="Accept this match">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                            </svg>
                            <span>Accept Match</span>
                        </button>
                    </div>
                </div>
                
                <!-- Waiting for Mutual Match State -->
                <div class="match-content match-waiting" id="matchWaitingView" style="display: none;">
                    <!-- Profile Hidden Notice -->
                    <div class="profile-hidden-notice" style="background: rgba(99, 102, 241, 0.1); border: 1px solid var(--primary); border-radius: 8px; padding: 10px 14px; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--primary)" stroke-width="2">
                            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
                            <line x1="1" y1="1" x2="23" y2="23"/>
                        </svg>
                        <span style="font-size: 0.8rem; color: var(--primary);">Your profile is hidden from new matches while connected</span>
                    </div>
                    
                    <div class="waiting-header">
                        <div class="waiting-animation">
                            <div class="waiting-hearts">
                                <span class="heart-icon user-heart accepted">â¤ï¸</span>
                                <span class="heart-connector">
                                    <span class="connector-dot"></span>
                                    <span class="connector-dot"></span>
                                    <span class="connector-dot"></span>
                                </span>
                                <span class="heart-icon match-heart" id="matchHeartStatus">ðŸ¤</span>
                            </div>
                        </div>
                        <h2>You've Accepted!</h2>
                        <p class="waiting-subtitle" id="waitingSubtitle">Waiting for <span id="waitingMatchName">Sarah</span> to accept...</p>
                    </div>
                    
                    <div class="acceptance-status">
                        <div class="status-card you-status accepted">
                            <div class="status-avatar">
                                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=80&h=80&fit=crop" alt="You" id="waitingUserPhoto">
                                <div class="status-check">âœ“</div>
                            </div>
                            <span class="status-name">You</span>
                            <span class="status-badge accepted">Accepted</span>
                        </div>
                        <div class="status-card match-status" id="matchStatusCard">
                            <div class="status-avatar">
                                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=80&h=80&fit=crop" alt="Match" id="waitingMatchPhoto">
                                <div class="status-pending">
                                    <div class="pending-spinner"></div>
                                </div>
                            </div>
                            <span class="status-name" id="waitingMatchNameCard">Sarah</span>
                            <span class="status-badge pending" id="matchStatusBadge">Deciding...</span>
                        </div>
                    </div>
                    
                    <div class="waiting-info" id="waitingInfoMessage" style="display: none;">
                        <p>ðŸ’¡ Waiting for <span id="waitingMatchNameTip">Sarah</span> to respond...</p>
                    </div>
                </div>
                
                <!-- Accepted Match View with Stats -->
                <div class="match-content match-accepted" id="matchAcceptedView" style="display: none;">
                    <div class="match-intro">
                        <div class="one-match-badge">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                            </svg>
                            YOUR MATCH
                        </div>
                        <span class="match-label" id="connectedWithLabel">Connected with Sarah</span>
                        <p class="match-sublabel clickable" onclick="showCompatibilityBreakdown()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"/>
                            </svg>
                            <span id="matchAcceptedCompatibility">92%</span> compatibility
                        </p>
                    </div>
                    
                    <div class="match-card accepted" id="matchCard">
                        <div class="match-photo">
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=500&fit=crop" alt="Match photo" id="matchAcceptedPhoto">
                            <div class="photo-gradient"></div>
                            <div class="match-status-badge">
                                <span class="status-dot"></span>
                                <span id="matchAcceptedStatus">Online now</span>
                            </div>
                        </div>
                        <div class="match-info">
                            <h3 class="match-name" id="matchAcceptedName">Sarah, 28</h3>
                            <p class="match-location">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                <span id="matchAcceptedLocation">3 miles away</span>
                            </p>
                            <p class="match-bio" id="matchAcceptedBio">"Looking for someone to explore new restaurants with and have deep conversations over coffee."</p>
                            <div class="match-tags" id="matchAcceptedTags">
                                <span class="tag">Photography</span>
                                <span class="tag">Hiking</span>
                                <span class="tag">Coffee</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Match Statistics -->
                    <div class="match-statistics">
                        <h4>Match Insights</h4>
                        <div class="stats-row">
                            <div class="stat-card">
                                <span class="stat-icon">ðŸ’•</span>
                                <span class="stat-number">100%</span>
                                <span class="stat-desc">Goals Match</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ðŸŽ¯</span>
                                <span class="stat-number">4</span>
                                <span class="stat-desc">Shared Interests</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-icon">ðŸ“</span>
                                <span class="stat-number">3mi</span>
                                <span class="stat-desc">Distance</span>
                            </div>
                        </div>
                        <div class="shared-interests-preview">
                            <span class="interest-match">ðŸ“¸ Photography</span>
                            <span class="interest-match">ðŸ¥¾ Hiking</span>
                            <span class="interest-match">â˜• Coffee</span>
                            <span class="interest-match">âœˆï¸ Travel</span>
                        </div>
                    </div>
                    
                    <div class="match-actions">
                        <button class="action-btn view-profile" onclick="showScreen('profile-view')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <line x1="12" y1="16" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12.01" y2="8"/>
                            </svg>
                        </button>
                        <button class="action-btn like large start-chat" onclick="startChat()">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </button>
                    </div>
                    <p class="start-chat-hint">Start chatting with your match!</p>
                </div>
                
                <nav class="bottom-nav">
                    <button class="nav-btn active" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>

            <!-- My Profile Preview Screen -->
            <div class="screen profile-view-screen" id="my-profile-preview">
                <div class="profile-view-header">
                    <button class="back-btn light" onclick="goBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <span class="preview-badge">Preview Mode</span>
                </div>
                <div class="profile-view-content">
                    <div class="profile-hero">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=500&fit=crop" alt="Your profile" id="previewMainPhoto">
                        <div class="profile-hero-overlay">
                            <div class="profile-hero-info">
                                <h1 id="previewName">Matt, 29</h1>
                                <p id="previewOccupation">Software Engineer</p>
                                <p class="profile-distance" id="previewLocation">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                        <circle cx="12" cy="10" r="3"/>
                                    </svg>
                                    New York, NY
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div class="profile-section">
                            <h3>About Me</h3>
                            <p id="previewBio">Looking for someone to share adventures with. Love hiking, photography, and trying new restaurants. Let's grab coffee!</p>
                        </div>
                        <div class="profile-section">
                            <h3>My Details</h3>
                            <div class="detail-grid" id="previewDetails">
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ“</span>
                                    <span id="previewHeight">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ’ª</span>
                                    <span id="previewBodyType">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸŽ“</span>
                                    <span id="previewEducation">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ·</span>
                                    <span id="previewDrinking">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸš¬</span>
                                    <span id="previewSmoking">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ‹ï¸</span>
                                    <span id="previewExercise">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ‘¶</span>
                                    <span id="previewChildren">Not set</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-icon">ðŸ™</span>
                                    <span id="previewReligion">Not set</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-section">
                            <h3>Interests</h3>
                            <div class="profile-tags" id="previewInterests">
                                <span class="tag">ðŸ“¸ Photography</span>
                                <span class="tag">ðŸ¥¾ Hiking</span>
                                <span class="tag">â˜• Coffee</span>
                                <span class="tag">âœˆï¸ Travel</span>
                            </div>
                        </div>
                        <div class="profile-section">
                            <h3>Looking For</h3>
                            <p id="previewLookingFor">ðŸ’• Long-term relationship</p>
                        </div>
                    </div>
                </div>
                <div class="preview-footer">
                    <p>This is how your profile appears to others</p>
                    <button class="btn btn-primary" onclick="goBack()">Done Previewing</button>
                </div>
            </div>

            <!-- Profile View Screen -->
            <div class="screen profile-view-screen" id="profile-view">
                <div class="profile-view-header">
                    <button class="back-btn light" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                </div>
                <div class="profile-view-content">
                    <div class="profile-hero">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=500&fit=crop" alt="Match" id="profileViewPhoto">
                        <div class="profile-hero-overlay"></div>
                        <div class="profile-hero-info">
                            <h2 id="profileViewName">Sarah, 28</h2>
                            <p id="profileViewOccupation">Product Designer â€¢ 3 miles away</p>
                        </div>
                    </div>
                    <div class="profile-details">
                        <div class="compatibility-score" onclick="showCompatibilityBreakdown()">
                            <div class="score-circle">
                                <svg viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="var(--border)" stroke-width="6"/>
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="var(--accent)" stroke-width="6" stroke-dasharray="260" stroke-dashoffset="20" stroke-linecap="round" transform="rotate(-90 50 50)" id="profileScoreCircle"/>
                                </svg>
                                <span class="score-value" id="profileCompatibility">92%</span>
                            </div>
                            <p class="score-label">Compatibility</p>
                            <span class="tap-hint">Tap to see breakdown</span>
                        </div>
                        
                        <!-- Basic Info -->
                        <div class="profile-section">
                            <h4>Basic Info</h4>
                            <div class="profile-info-grid">
                                <div class="info-item">
                                    <span class="info-icon">ðŸ“</span>
                                    <div class="info-content">
                                        <span class="info-label">Height</span>
                                        <span class="info-value" id="profileViewHeight">5'6"</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸ’ª</span>
                                    <div class="info-content">
                                        <span class="info-label">Body Type</span>
                                        <span class="info-value" id="profileViewBodyType">Athletic</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸŽ“</span>
                                    <div class="info-content">
                                        <span class="info-label">Education</span>
                                        <span class="info-value" id="profileViewEducation">Bachelor's Degree</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸŒ</span>
                                    <div class="info-content">
                                        <span class="info-label">Ethnicity</span>
                                        <span class="info-value" id="profileViewEthnicity">White</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h4>About</h4>
                            <p id="profileViewBio">"Looking for someone to explore new restaurants with and have deep conversations over coffee."</p>
                        </div>
                        
                        <div class="profile-section">
                            <h4>Interests</h4>
                            <div class="interests-grid" id="profileViewInterests">
                                <span class="interest-tag">ðŸ“¸ Photography</span>
                                <span class="interest-tag">ðŸ¥¾ Hiking</span>
                                <span class="interest-tag">â˜• Coffee</span>
                            </div>
                        </div>
                        
                        <div class="profile-section">
                            <h4>Looking for</h4>
                            <p class="looking-for" id="profileViewLookingFor">Long-term relationship</p>
                        </div>
                        
                        <!-- Lifestyle -->
                        <div class="profile-section">
                            <h4>Lifestyle</h4>
                            <div class="profile-info-grid">
                                <div class="info-item">
                                    <span class="info-icon">ðŸš¬</span>
                                    <div class="info-content">
                                        <span class="info-label">Smoking</span>
                                        <span class="info-value" id="profileViewSmoking">Never</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸ·</span>
                                    <div class="info-content">
                                        <span class="info-label">Drinking</span>
                                        <span class="info-value" id="profileViewDrinking">Socially</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸƒ</span>
                                    <div class="info-content">
                                        <span class="info-label">Exercise</span>
                                        <span class="info-value" id="profileViewExercise">Regularly</span>
                                    </div>
                                </div>
                                <div class="info-item">
                                    <span class="info-icon">ðŸ™</span>
                                    <div class="info-content">
                                        <span class="info-label">Religion</span>
                                        <span class="info-value" id="profileViewReligion">Spiritual</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Family -->
                        <div class="profile-section">
                            <h4>Family Plans</h4>
                            <div class="profile-info-grid single">
                                <div class="info-item wide">
                                    <span class="info-icon">ðŸ‘¶</span>
                                    <div class="info-content">
                                        <span class="info-label">Children</span>
                                        <span class="info-value" id="profileViewChildren">Doesn't have kids, wants them</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-gallery" id="profileViewGallery">
                            <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?w=200&h=200&fit=crop" alt="">
                            <img src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=200&h=200&fit=crop" alt="">
                        </div>
                    </div>
                </div>
                <div class="profile-view-actions">
                    <button class="action-btn decline" onclick="declineMatch(); showScreen('match')">
                        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <button class="action-btn like large" onclick="likeMatch()">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Match Success Modal -->
            <div class="modal" id="match-modal">
                <div class="modal-content match-success">
                    <div class="match-success-animation">
                        <div class="hearts-container">
                            <div class="heart heart-1">â¤ï¸</div>
                            <div class="heart heart-2">â¤ï¸</div>
                            <div class="heart heart-3">â¤ï¸</div>
                        </div>
                        <div class="match-avatars">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop" class="avatar">
                            <div class="match-icon">ðŸ’•</div>
                            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop" class="avatar">
                        </div>
                    </div>
                    <h2>It's a Match!</h2>
                    <p id="matchModalText">You and Sarah both liked each other</p>
                    <button class="btn btn-primary" onclick="startChat()">Send a Message</button>
                    <button class="btn btn-secondary" onclick="closeModal()">Keep Browsing</button>
                </div>
            </div>

            <!-- Chat List Screen - ONE CONNECTION AT A TIME -->
            <div class="screen chat-list-screen" id="chat-list">
                <div class="app-header">
                    <div class="logo-small">OITH</div>
                    <h2 class="header-title">Your Connection</h2>
                </div>
                <div class="chat-list-content" id="chatListContent">
                    <!-- Time Remaining Banner (hidden after first message) -->
                    <div class="time-limit-banner" id="timeToConnectBanner">
                        <div class="time-limit-icon">â°</div>
                        <div class="time-limit-info">
                            <span class="time-limit-label">Time to connect</span>
                            <span class="time-limit-countdown" id="matchTimeLimit">18:24:36</span>
                        </div>
                        <div class="time-limit-progress">
                            <div class="time-limit-bar" id="timeToConnectProgress" style="width: 76%;"></div>
                        </div>
                    </div>

                    <!-- Planned Date Banner (shown when date is planned) -->
                    <div class="planned-date-banner" id="plannedDateBanner" style="display: none;">
                        <div class="date-banner-header">
                            <div class="date-banner-icon">ðŸ“…</div>
                            <div class="date-banner-info">
                                <span class="date-banner-label">Date Planned!</span>
                                <span class="date-banner-venue" id="plannedDateVenue">The Golden Bean</span>
                            </div>
                            <div class="date-countdown-badge" id="dateCountdownBadge">
                                <span id="dateCountdownText">2 days</span>
                            </div>
                        </div>
                        <div class="date-banner-details">
                            <div class="date-detail">
                                <span class="detail-icon">ðŸ—“ï¸</span>
                                <span id="plannedDateDay">Saturday, Dec 14</span>
                            </div>
                            <div class="date-detail">
                                <span class="detail-icon">ðŸ•</span>
                                <span id="plannedDateTime">Afternoon</span>
                            </div>
                        </div>
                        <div class="date-banner-actions">
                            <button class="btn btn-calendar" onclick="addDateToCalendar()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2"/>
                                    <line x1="16" y1="2" x2="16" y2="6"/>
                                    <line x1="8" y1="2" x2="8" y2="6"/>
                                    <line x1="3" y1="10" x2="21" y2="10"/>
                                    <path d="M9 16l2 2 4-4"/>
                                </svg>
                                Add to Calendar
                            </button>
                            <button class="btn btn-directions" onclick="openDirections()">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                Get Directions
                            </button>
                            <button class="btn btn-text btn-xs" onclick="showScreen('date-plan')" style="padding: 6px 12px; font-size: 0.75rem;">
                                âœï¸ Edit
                            </button>
                        </div>
                    </div>

                    <!-- Single Active Connection -->
                    <div class="active-connection-card" onclick="showScreen('chat')">
                        <div class="connection-header">
                            <div class="connection-avatar">
                                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop" alt="Match" id="chatListMatchAvatar">
                                <span class="online-dot"></span>
                            </div>
                            <div class="connection-info">
                                <h3 id="chatListMatchName">Sarah, 28</h3>
                                <p class="connection-status">
                                    <span class="status-dot active"></span>
                                    <span id="chatListMatchStatus">Online now</span>
                                </p>
                            </div>
                            <span class="unread-badge">2</span>
                        </div>
                        <div class="connection-preview">
                            <p id="chatListPreviewMessage">"Hey! I love that coffee shop you mentioned..."</p>
                            <span class="preview-time" id="chatListPreviewTime">2 min ago</span>
                        </div>
                        <button class="btn btn-primary btn-block" onclick="showScreen('chat')">Continue Conversation</button>
                        <button class="btn btn-text btn-small end-match-link" onclick="showEndMatchModal()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M15 9l-6 6M9 9l6 6"/>
                            </svg>
                            End this match
                        </button>
                    </div>

                    <!-- Connection Metrics -->
                    <div class="connection-metrics">
                        <h4>Connection Insights</h4>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-icon">ðŸ’¬</div>
                                <div class="metric-value">12</div>
                                <div class="metric-label">Messages</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-icon">âš¡</div>
                                <div class="metric-value">8m</div>
                                <div class="metric-label">Avg Response</div>
                            </div>
                            <div class="metric-card clickable" onclick="showCompatibilityBreakdown()" title="Tap to see breakdown">
                                <div class="metric-icon">ðŸŽ¯</div>
                                <div class="metric-value" id="chatCompatibility">92%</div>
                                <div class="metric-label">Compatibility</div>
                            </div>
                            <div class="metric-card highlight">
                                <div class="metric-icon">ðŸ“…</div>
                                <div class="metric-value">Ready!</div>
                                <div class="metric-label">Date Readiness</div>
                            </div>
                        </div>
                    </div>

                    <!-- AI Insight -->
                    <div class="ai-insight-card">
                        <div class="insight-header">
                            <span class="insight-icon">ðŸ’¡</span>
                            <span class="insight-title">AI Insight</span>
                        </div>
                        <p class="insight-text" id="aiInsightText">Sarah mentioned she loves trying new coffee spots. Consider suggesting The Golden Bean for your first date!</p>
                        <button class="btn btn-secondary btn-small" onclick="showScreen('date-plan')">Plan Date Now</button>
                    </div>

                    <!-- 24 Hour Explanation -->
                    <div class="time-limit-explainer">
                        <h5>Why 24 hours?</h5>
                        <p>Quality connections happen when you're both engaged. The time limit encourages real conversations and prevents matches from going stale.</p>
                    </div>
                    </div>

                <!-- Empty State (OUTSIDE chatListContent so it shows when content is hidden) -->
                <div class="empty-state" id="emptyChats" style="display: none; flex-direction: column; align-items: center; justify-content: center; padding: 40px 24px; text-align: center; flex: 1;">
                    <div style="width: 120px; height: 120px; background: linear-gradient(135deg, rgba(193, 127, 116, 0.15), rgba(193, 127, 116, 0.05)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 24px;">
                        <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            <circle cx="12" cy="10" r="1" fill="var(--accent)"/>
                            <circle cx="8" cy="10" r="1" fill="var(--accent)"/>
                            <circle cx="16" cy="10" r="1" fill="var(--accent)"/>
                        </svg>
                    </div>
                    <h3 style="color: var(--text-primary); margin-bottom: 12px; font-size: 1.4rem;">No Connection Yet</h3>
                    <p style="color: var(--text-secondary); font-size: 1rem; max-width: 300px; margin: 0 auto 24px; line-height: 1.5;">
                        Once you match with another user, your chat window will appear here!
                    </p>
                    <div style="background: linear-gradient(135deg, rgba(193, 127, 116, 0.1), rgba(193, 127, 116, 0.05)); padding: 20px; border-radius: 16px; max-width: 300px; margin: 0 auto 24px; border: 1px solid rgba(193, 127, 116, 0.2);">
                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0; line-height: 1.6;">
                            <strong style="color: var(--accent);">ðŸ’¡ How it works:</strong><br><br>
                            <span style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="background: var(--accent); color: white; width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem;">1</span>
                                View your personal match
                            </span>
                            <span style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="background: var(--accent); color: white; width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem;">2</span>
                                Accept if you're interested
                            </span>
                            <span style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <span style="background: var(--accent); color: white; width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem;">3</span>
                                Wait for them to accept too
                            </span>
                            <span style="display: flex; align-items: center; gap: 8px;">
                                <span style="background: var(--accent); color: white; width: 20px; height: 20px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.75rem;">4</span>
                                Start chatting! ðŸ’¬
                            </span>
                        </p>
                </div>
                    <button class="btn btn-primary" onclick="showScreen('match')" style="padding: 14px 32px; font-size: 1rem;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        Find Your Match
                    </button>
                </div>
                
                <nav class="bottom-nav">
                    <button class="nav-btn" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn active" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>

            <!-- Chat Screen -->
            <div class="screen chat-screen" id="chat">
                <div class="chat-header">
                    <button class="back-btn" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <div class="chat-user-info" onclick="showScreen('profile-view')">
                        <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop" alt="Match" class="chat-user-avatar" id="chatMatchAvatar">
                        <div>
                            <h4 id="chatMatchName">Sarah</h4>
                            <span class="online-status" id="chatMatchStatus">Online now</span>
                        </div>
                    </div>
                    <div class="chat-header-actions">
                        <button class="icon-btn" onclick="showScreen('date-plan')" title="Plan a date">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                    </button>
                        <button class="icon-btn" onclick="showEndMatchModal()" title="More options">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="1"/>
                                <circle cx="12" cy="5" r="1"/>
                                <circle cx="12" cy="19" r="1"/>
                        </svg>
                    </button>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message-date">Today</div>
                    <div class="message received">
                        <p>Hey! I noticed you're into photography too. What kind of shots do you usually take? ðŸ“¸</p>
                        <span class="message-time">2:34 PM</span>
                    </div>
                    <div class="message sent">
                        <p>Hey Sarah! Mostly landscape and street photography. I love capturing golden hour moments â˜€ï¸</p>
                        <span class="message-time">2:36 PM</span>
                    </div>
                    <div class="message received">
                        <p>Oh that's amazing! There's this coffee shop downtown with incredible natural lighting. We should check it out sometime!</p>
                        <span class="message-time">2:38 PM</span>
                    </div>
                    <div class="message sent">
                        <p>That sounds perfect! I'm always looking for new spots. Which one is it?</p>
                        <span class="message-time">2:40 PM</span>
                    </div>
                    <div class="message received">
                        <p>It's called "The Golden Bean" on Main Street. They have these huge windows that let in the most beautiful light in the afternoon ðŸŒ…</p>
                        <span class="message-time">2:41 PM</span>
                    </div>
                </div>
                <div class="icebreaker-suggestions" id="icebreakers">
                    <span class="icebreaker-label">Quick replies:</span>
                    <div class="icebreaker-scroll">
                        <button class="icebreaker-btn" onclick="sendIcebreaker(this)">Sounds great! When are you free?</button>
                        <button class="icebreaker-btn" onclick="sendIcebreaker(this)">I'd love to see your photos!</button>
                        <button class="icebreaker-btn" onclick="sendIcebreaker(this)">Let's plan something! ðŸ“…</button>
                    </div>
                </div>
                <div class="chat-input-container">
                    <!-- Hidden file input for gallery access -->
                    <input type="file" id="chatPhotoInput" accept="image/*" style="display: none;" onchange="handleChatPhotoSelect(event)">
                    <button class="icon-btn photo-attach-btn" onclick="openGallery()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21"/>
                        </svg>
                    </button>
                    <input type="text" class="chat-input" placeholder="Type a message..." id="messageInput" onkeypress="handleMessageKeypress(event)">
                    <button class="send-btn" onclick="sendMessage()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Bottom Navigation -->
                <nav class="bottom-nav chat-bottom-nav">
                    <button class="nav-btn" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn active" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>

            <!-- Date Planning Screen -->
            <div class="screen date-plan-screen" id="date-plan">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('chat')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Plan a Date</h2>
                </div>
                <div class="date-plan-content">
                    <div class="date-plan-section">
                        <h4>When works for you?</h4>
                        <div class="date-options" id="dateOptions">
                            <!-- Dates will be populated dynamically based on today's date -->
                        </div>
                    </div>
                    <div class="date-plan-section">
                        <h4>What time?</h4>
                        <div class="time-dropdown-wrapper">
                            <select id="timeDropdown" class="time-dropdown" onchange="selectTimeFromDropdown(this)">
                                <optgroup label="Morning">
                                    <option value="8:00 AM">8:00 AM</option>
                                    <option value="8:30 AM">8:30 AM</option>
                                    <option value="9:00 AM">9:00 AM</option>
                                    <option value="9:30 AM">9:30 AM</option>
                                    <option value="10:00 AM">10:00 AM</option>
                                    <option value="10:30 AM">10:30 AM</option>
                                    <option value="11:00 AM">11:00 AM</option>
                                    <option value="11:30 AM">11:30 AM</option>
                                </optgroup>
                                <optgroup label="Afternoon">
                                    <option value="12:00 PM">12:00 PM</option>
                                    <option value="12:30 PM">12:30 PM</option>
                                    <option value="1:00 PM">1:00 PM</option>
                                    <option value="1:30 PM">1:30 PM</option>
                                    <option value="2:00 PM" selected>2:00 PM</option>
                                    <option value="2:30 PM">2:30 PM</option>
                                    <option value="3:00 PM">3:00 PM</option>
                                    <option value="3:30 PM">3:30 PM</option>
                                    <option value="4:00 PM">4:00 PM</option>
                                    <option value="4:30 PM">4:30 PM</option>
                                    <option value="5:00 PM">5:00 PM</option>
                                </optgroup>
                                <optgroup label="Evening">
                                    <option value="5:30 PM">5:30 PM</option>
                                    <option value="6:00 PM">6:00 PM</option>
                                    <option value="6:30 PM">6:30 PM</option>
                                    <option value="7:00 PM">7:00 PM</option>
                                    <option value="7:30 PM">7:30 PM</option>
                                    <option value="8:00 PM">8:00 PM</option>
                                    <option value="8:30 PM">8:30 PM</option>
                                    <option value="9:00 PM">9:00 PM</option>
                                    <option value="9:30 PM">9:30 PM</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>
                    <!-- AI Recommendation Banner -->
                    <div class="ai-recommendation-banner" id="aiDateRecommendation">
                        <div class="ai-banner-icon">ðŸ¤–</div>
                        <div class="ai-banner-content">
                            <h4>AI Recommendation</h4>
                            <p id="aiRecommendationText">Based on your conversation, we think a coffee date would be perfect!</p>
                            <div class="conversation-insights" id="conversationInsights" style="display: none;">
                                <span class="insight-icon">ðŸ’¬</span>
                                <span class="insight-text">Analyzing your conversation...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="date-plan-section">
                        <h4>Find a Venue</h4>
                        
                        <!-- Location Search -->
                        <div class="venue-search-container">
                            <div class="search-input-wrapper">
                                <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"/>
                                    <path d="M21 21l-4.35-4.35"/>
                                </svg>
                                <input type="text" id="venueSearchInput" placeholder="Search restaurants, bars, cafes..." oninput="searchVenues(this.value)" autocomplete="off">
                                <button class="clear-search-btn" id="clearVenueSearch" onclick="clearVenueSearch()" style="display: none;">âœ•</button>
                            </div>
                            <div class="search-filters">
                                <button class="filter-chip active" onclick="filterVenueType(this, 'all')">All</button>
                                <button class="filter-chip" onclick="filterVenueType(this, 'restaurant')">ðŸ½ï¸ Restaurant</button>
                                <button class="filter-chip" onclick="filterVenueType(this, 'cafe')">â˜• Cafe</button>
                                <button class="filter-chip" onclick="filterVenueType(this, 'bar')">ðŸ¸ Bar</button>
                                <button class="filter-chip" onclick="filterVenueType(this, 'activity')">ðŸŽ¯ Activity</button>
                            </div>
                        </div>
                        
                        <!-- Search Results -->
                        <div class="venue-search-results" id="venueSearchResults" style="display: none;">
                            <div class="search-results-header">
                                <span id="searchResultsCount">0 results</span>
                                <button class="btn-text" onclick="clearVenueSearch()">Clear</button>
                            </div>
                            <div class="venue-list" id="searchResultsList">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Suggested Venues -->
                        <div id="suggestedVenuesSection">
                            <p class="section-subtitle" id="venueSubtitle">Ranked by your conversation topics & shared interests</p>
                            <p class="user-location" id="userLocationDisplay">ðŸ“ Near <span id="userLocationText">your area</span></p>
                            <div class="venue-list" id="venueList">
                                <!-- Venues will be populated dynamically based on location -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="date-plan-footer">
                    <!-- Safety notification option (only shown if emergency contact exists) -->
                    <div class="safety-notify-option" id="safetyNotifyOption" style="display: none;">
                        <label class="checkbox-label">
                            <input type="checkbox" id="notifyEmergencyContact" checked>
                            <span class="checkbox-custom"></span>
                            <span class="checkbox-text">
                                <span class="safety-icon">ðŸ›¡ï¸</span>
                                Notify <span id="emergencyContactName">emergency contact</span> about this date
                            </span>
                        </label>
                    </div>
                    <button class="btn btn-primary" id="sendDateRequestBtn" onclick="confirmDate()">Send Date Request</button>
                </div>
            </div>

            <!-- Compatibility Breakdown Modal -->
            <div class="modal" id="compatibility-modal">
                <div class="modal-content compatibility-breakdown">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                                    </svg>
                    </button>
                    <div class="compatibility-header">
                        <div class="big-score" id="modalCompatibility">92%</div>
                        <h3>Compatibility Score</h3>
                        <p>Here's how we calculated your match</p>
                                </div>
                    <div class="compatibility-factors">
                        <div class="factor-item">
                            <div class="factor-info">
                                <span class="factor-icon">ðŸ’•</span>
                                <span class="factor-name">Relationship Goals</span>
                            </div>
                            <div class="factor-score">
                                <div class="factor-bar">
                                    <div class="factor-fill" style="width: 100%"></div>
                                    </div>
                                <span class="factor-value">Perfect Match</span>
                                </div>
                            </div>
                        <div class="factor-item">
                            <div class="factor-info">
                                <span class="factor-icon">ðŸŽ¯</span>
                                <span class="factor-name">Shared Interests</span>
                                    </div>
                            <div class="factor-score">
                                <div class="factor-bar">
                                    <div class="factor-fill" style="width: 85%"></div>
                                </div>
                                <span class="factor-value">4 of 6</span>
                            </div>
                        </div>
                        <div class="factor-item">
                            <div class="factor-info">
                                <span class="factor-icon">ðŸ“</span>
                                <span class="factor-name">Location</span>
                    </div>
                            <div class="factor-score">
                                <div class="factor-bar">
                                    <div class="factor-fill" style="width: 95%"></div>
                </div>
                                <span class="factor-value">3 miles</span>
                            </div>
                        </div>
                        <div class="factor-item">
                            <div class="factor-info">
                                <span class="factor-icon">ðŸŽ‚</span>
                                <span class="factor-name">Age Preference</span>
                            </div>
                            <div class="factor-score">
                                <div class="factor-bar">
                                    <div class="factor-fill" style="width: 90%"></div>
                                </div>
                                <span class="factor-value">In range</span>
                            </div>
                        </div>
                        <div class="factor-item">
                            <div class="factor-info">
                                <span class="factor-icon">ðŸ’¬</span>
                                <span class="factor-name">Communication Style</span>
                            </div>
                            <div class="factor-score">
                                <div class="factor-bar">
                                    <div class="factor-fill" style="width: 88%"></div>
                                </div>
                                <span class="factor-value">Similar</span>
                            </div>
                        </div>
                    </div>
                    <div class="compatibility-footer">
                        <div class="shared-interests">
                            <h4>Shared Interests</h4>
                            <div class="shared-tags">
                                <span class="shared-tag">ðŸ“¸ Photography</span>
                                <span class="shared-tag">ðŸ¥¾ Hiking</span>
                                <span class="shared-tag">â˜• Coffee</span>
                                <span class="shared-tag">âœˆï¸ Travel</span>
                            </div>
                        </div>
                        <p class="ai-note">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4M12 8h.01"/>
                                    </svg>
                            Our AI analyzes profiles to find meaningful connections
                        </p>
                                </div>
                            </div>
                                    </div>

            <!-- End Match Modal -->
            <div class="modal" id="end-match-modal">
                <div class="modal-content end-match-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    
                    <div class="end-match-header">
                        <div class="end-match-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M15 9l-6 6M9 9l6 6"/>
                            </svg>
                                </div>
                        <h3>End This Match?</h3>
                        <p>We're sorry it didn't work out. Your profile will become visible to find new matches.</p>
                            </div>
                    
                    <div class="end-match-form">
                        <label class="form-label">Why are you ending this match?</label>
                        <select id="endMatchReason" class="end-match-select">
                            <option value="">Select a reason...</option>
                            <option value="no-connection">We didn't have a connection</option>
                            <option value="not-responsive">They weren't responsive</option>
                            <option value="different-intentions">We have different intentions</option>
                            <option value="met-someone">I met someone else</option>
                            <option value="not-ready">I'm not ready to date right now</option>
                            <option value="inappropriate">Inappropriate behavior</option>
                            <option value="fake-profile">Profile seems fake</option>
                            <option value="other">Other reason</option>
                        </select>
                        
                        <div class="other-reason-container" id="otherReasonContainer" style="display: none;">
                            <label class="form-label">Please tell us more (optional)</label>
                            <textarea id="otherReasonText" placeholder="Help us improve..." maxlength="200"></textarea>
                                    </div>
                                </div>
                    
                    <div class="end-match-actions">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-danger" onclick="confirmEndMatch()">End Match</button>
                            </div>
                    
                    <p class="end-match-note">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        This action cannot be undone
                    </p>
                        </div>
                    </div>

            <!-- Emergency Contact Modal -->
            <div class="modal" id="emergency-contact-modal">
                <div class="modal-content emergency-contact-modal-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    
                    <div class="emergency-modal-header">
                        <div class="emergency-modal-icon">ðŸ›¡ï¸</div>
                        <h3>Emergency Contact</h3>
                        <p>This person will be notified when you go on a date</p>
                </div>
                    
                    <div class="emergency-form">
                        <div class="input-group">
                            <label>Contact Name</label>
                            <input type="text" id="emergencyNameInput" placeholder="e.g., Mom, Best Friend, Roommate">
                        </div>
                        <div class="input-group">
                            <label>Phone Number</label>
                            <input type="tel" id="emergencyPhoneInput" placeholder="(555) 123-4567">
                        </div>
                        <div class="input-group">
                            <label>Relationship (optional)</label>
                            <select id="emergencyRelationship">
                                <option value="">Select relationship...</option>
                                <option value="parent">Parent</option>
                                <option value="sibling">Sibling</option>
                                <option value="friend">Friend</option>
                                <option value="roommate">Roommate</option>
                                <option value="spouse">Spouse/Partner</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="safety-message-preview">
                        <p class="preview-label">Message preview they'll receive:</p>
                        <div class="message-preview-box">
                            <p>"Hi! <span id="previewContactName">[Contact]</span>, <span id="previewUserName">Matt</span> is going on a date through OITH.</p>
                            <p><strong>Match:</strong> Sarah, 28</p>
                            <p><strong>Location:</strong> Blue Bottle Coffee, Chelsea</p>
                            <p><strong>Time:</strong> Today at 7:00 PM</p>
                            <p>If you don't hear from them, check in! ðŸ’™"</p>
                        </div>
                    </div>
                    
                    <div class="emergency-actions">
                        <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                        <button class="btn btn-primary" onclick="saveEmergencyContact()">Save Contact</button>
                    </div>
                </div>
            </div>

            <!-- Safety Notification Sent Modal -->
            <div class="modal" id="safety-notification-modal">
                <div class="modal-content safety-notification-content">
                    <div class="safety-sent-icon">âœ…</div>
                    <h3>Safety Alert Sent!</h3>
                    <p>Your emergency contact has been notified about your date.</p>
                    
                    <div class="notification-details">
                        <div class="detail-row">
                            <span class="detail-label">Sent to:</span>
                            <span class="detail-value" id="sentToName">Mom</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Phone:</span>
                            <span class="detail-value" id="sentToPhone">(555) 123-4567</span>
                        </div>
                    </div>
                    
                    <div class="sent-message-summary">
                        <p>ðŸ“ <span id="sentVenue">Blue Bottle Coffee</span></p>
                        <p>ðŸ‘¤ Date with <span id="sentMatchName">Sarah</span></p>
                        <p>â° <span id="sentDateTime">Today at 7:00 PM</span></p>
                    </div>
                    
                    <button class="btn btn-primary" onclick="closeModal()">Got It!</button>
                    
                    <p class="safety-tip">ðŸ’¡ Remember to check in with your contact after your date!</p>
                </div>
            </div>

            <!-- Date Confirmed Modal -->
            <div class="modal" id="date-confirmed-modal">
                <div class="modal-content date-confirmed">
                    <div class="date-confirmed-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                            <path d="M9 16l2 2 4-4"/>
                        </svg>
                    </div>
                    <h2>Date Request Sent!</h2>
                    <div class="date-details">
                        <p><strong>Saturday, March 15</strong></p>
                        <p>Afternoon at The Golden Bean</p>
                    </div>
                    <p class="date-note" id="dateNoteText">We'll notify you when Sarah confirms!</p>
                    <button class="btn btn-primary" onclick="closeModal(); showScreen('chat')">Back to Chat</button>
                </div>
            </div>

            <!-- Update Payment Modal -->
            <div class="modal" id="update-payment-modal">
                <div class="modal-content payment-update-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="payment-modal-header">
                        <div class="payment-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                <line x1="1" y1="10" x2="23" y2="10"/>
                            </svg>
                        </div>
                        <h2>Update Payment Method</h2>
                        <p class="payment-subtitle">Enter your new card details below</p>
                    </div>
                    
                    <form class="payment-form" onsubmit="savePaymentMethod(event)">
                        <div class="form-group">
                            <label>Cardholder Name</label>
                            <input type="text" id="cardholderName" placeholder="Name on card" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Card Number</label>
                            <div class="card-input-wrapper">
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" 
                                    maxlength="19" oninput="formatCardNumber(this)" required>
                                <div class="card-brand" id="cardBrand">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                        <line x1="1" y1="10" x2="23" y2="10"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>Expiry Date</label>
                                <input type="text" id="cardExpiry" placeholder="MM/YY" 
                                    maxlength="5" oninput="formatExpiry(this)" required>
                            </div>
                            <div class="form-group">
                                <label>CVV</label>
                                <div class="cvv-input-wrapper">
                                    <input type="text" id="cardCvv" placeholder="123" 
                                        maxlength="4" oninput="this.value = this.value.replace(/\D/g, '')" required>
                                    <button type="button" class="cvv-help" onclick="showCvvHelp()">?</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="save-card-option">
                            <label class="checkbox-label">
                                <input type="checkbox" id="setAsDefault" checked>
                                <span class="checkbox-custom"></span>
                                <span>Set as default payment method</span>
                            </label>
                        </div>
                        
                        <div class="payment-security-note">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                            <span>Your payment info is encrypted and secure</span>
                        </div>
                        
                        <div class="payment-form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Card</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Reset Password Modal (Forgot Password) -->
            <div class="modal" id="reset-password-modal">
                <div class="modal-content password-change-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="password-modal-header">
                        <div class="password-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <h2>Reset Password</h2>
                        <p class="password-subtitle">Create a new password for your account</p>
                    </div>
                    
                    <form class="password-form" onsubmit="resetPassword(event)">
                        <input type="hidden" id="resetEmail">
                        
                        <div class="form-group">
                            <label>Current Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="resetCurrentPassword" placeholder="Enter current password" required>
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('resetCurrentPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>New Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="resetNewPassword" placeholder="At least 8 characters" required minlength="8">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('resetNewPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="resetConfirmPassword" placeholder="Re-enter new password" required minlength="8">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('resetConfirmPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="password-form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Reset Password</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Change Password Modal -->
            <div class="modal" id="change-password-modal">
                <div class="modal-content password-change-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="password-modal-header">
                        <div class="password-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <h2>Change Password</h2>
                        <p class="password-subtitle">Enter your current password and choose a new one</p>
                    </div>
                    
                    <form class="password-form" onsubmit="saveNewPassword(event)">
                        <div class="form-group">
                            <label>Current Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="currentPassword" placeholder="Enter current password" required>
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('currentPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>New Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="newPassword" placeholder="At least 8 characters" required minlength="8" oninput="checkPasswordStrength(this.value)">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('newPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="password-strength" id="passwordStrength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="strengthFill"></div>
                                </div>
                                <span class="strength-text" id="strengthText">Password strength</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Confirm New Password</label>
                            <div class="password-input-wrapper">
                                <input type="password" id="confirmPassword" placeholder="Re-enter new password" required minlength="8">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirmPassword')">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="password-requirements">
                            <p>Password must contain:</p>
                            <ul>
                                <li id="req-length"><span class="req-icon">â—‹</span> At least 8 characters</li>
                                <li id="req-upper"><span class="req-icon">â—‹</span> One uppercase letter</li>
                                <li id="req-lower"><span class="req-icon">â—‹</span> One lowercase letter</li>
                                <li id="req-number"><span class="req-icon">â—‹</span> One number</li>
                            </ul>
                        </div>
                        
                        <div class="password-form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Update Password</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Edit Email Modal -->
            <div class="modal" id="edit-email-modal">
                <div class="modal-content edit-account-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="edit-account-header">
                        <div class="edit-account-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                        </div>
                        <h2>Update Email</h2>
                    </div>
                    <form onsubmit="saveEmail(event)">
                        <div class="form-group">
                            <label>New Email Address</label>
                            <input type="email" id="newEmail" placeholder="Enter new email" required>
                        </div>
                        <p class="form-hint">A verification link will be sent to your new email address.</p>
                        <div class="edit-account-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Update Email</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Edit Phone Modal -->
            <div class="modal" id="edit-phone-modal">
                <div class="modal-content edit-account-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="edit-account-header">
                        <div class="edit-account-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
                            </svg>
                        </div>
                        <h2>Update Phone</h2>
                    </div>
                    <form onsubmit="savePhone(event)">
                        <div class="form-group">
                            <label>New Phone Number</label>
                            <input type="tel" id="newPhone" placeholder="+1 (555) 123-4567" required oninput="formatPhoneNumberInput(this)">
                        </div>
                        <p class="form-hint">A verification code will be sent to your new phone number.</p>
                        <div class="edit-account-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Update Phone</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- My Profile Screen -->
            <div class="screen my-profile-screen" id="my-profile">
                <div class="app-header">
                    <div class="logo-small">OITH</div>
                    <button class="icon-btn" onclick="showScreen('settings')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                    </button>
                </div>
                <div class="my-profile-content">
                    <!-- Profile Visibility Status -->
                    <div class="profile-visibility-banner" id="profileVisibilityBadge">
                        <div class="visibility-icon">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </div>
                        <span id="profileVisibilityText">Profile visible to matches</span>
                    </div>

                    <!-- Welcome back message for returning users -->
                    <div id="profileWelcomeMessage" style="display:none; margin-top: 12px; padding: 10px 12px; border-radius: 12px; background: rgba(196, 88, 74, 0.08); color: #8b5a4a; font-size: 0.85rem; font-weight: 500;">
                        <!-- Filled dynamically on login -->
                    </div>
                    
                    <div class="profile-card">
                        <div class="profile-photo-main">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop" alt="Your photo" id="mainProfilePhoto">
                            <button class="edit-photo-btn" onclick="showScreen('manage-photos')">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                </svg>
                            </button>
                        </div>
                        <h2 class="profile-name" id="profileDisplayName">Matt, 29</h2>
                        <p class="profile-location" id="profileDisplayLocation">New York, NY</p>
                    </div>

                    <!-- Global Platform Metrics -->
                    <div class="platform-metrics">
                        <div class="platform-metrics-header">
                            <span class="platform-icon">ðŸ“Š</span>
                            <span class="platform-label">OITH Community Stats</span>
                        </div>
                        <div class="platform-stats-grid">
                            <div class="platform-stat">
                                <div class="platform-stat-value" id="platformResponseRate">--</div>
                                <div class="platform-stat-label">Response Rate</div>
                        </div>
                            <div class="platform-stat">
                                <div class="platform-stat-value" id="platformDatesPlanned">--</div>
                                <div class="platform-stat-label">Dates Planned</div>
                        </div>
                            <div class="platform-stat">
                                <div class="platform-stat-value" id="platformAvgToDate">--</div>
                                <div class="platform-stat-label">Avg to First Date</div>
                    </div>
                            <div class="platform-stat">
                                <div class="platform-stat-value" id="platformMatchSuccess">--</div>
                                <div class="platform-stat-label">Match Success</div>
                            </div>
                        </div>
                        <div class="platform-highlight">
                            <span class="highlight-badge">ðŸ”¥ Today</span>
                            <span class="highlight-text" id="platformTodayMatches">Loading...</span>
                        </div>
                    </div>

                    <div class="profile-actions-list">
                        <button class="profile-action-item highlight" onclick="showScreen('feedback-metrics')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 20V10"/>
                                <path d="M12 20V4"/>
                                <path d="M6 20v-6"/>
                            </svg>
                            <span>Feedback & Metrics</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                        <button class="profile-action-item" onclick="showScreen('my-profile-preview')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                            <span>Preview Profile</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                        <button class="profile-action-item" onclick="showScreen('edit-profile')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                            </svg>
                            <span>Edit Profile</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                        <button class="profile-action-item" onclick="showScreen('match-preferences')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="21" x2="4" y2="14"/>
                                <line x1="4" y1="10" x2="4" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12" y2="3"/>
                                <line x1="20" y1="21" x2="20" y2="16"/>
                                <line x1="20" y1="12" x2="20" y2="3"/>
                            </svg>
                            <span>Match Preferences</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                        <button class="profile-action-item" onclick="showScreen('safety-privacy')">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            </svg>
                            <span>Safety & Privacy</span>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <nav class="bottom-nav">
                    <button class="nav-btn" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn active" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>

            <!-- Manage Photos Screen -->
            <div class="screen manage-photos-screen" id="manage-photos">
                <header class="screen-header">
                    <button class="back-btn" onclick="goBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2>Manage Photos</h2>
                    <button class="btn btn-text" onclick="savePhotosAndGoBack()">Done</button>
                </header>
                
                <div class="manage-photos-content">
                    <p class="photos-hint">Add up to 6 photos. Your first photo is your main profile picture.</p>
                    
                    <!-- Hidden file input for photo upload -->
                    <input type="file" id="photoUploadInput" accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
                    
                    <div class="photo-grid-manage">
                        <!-- Photo Slot 1 (Main) -->
                        <div class="photo-slot main-photo" id="photoSlot0" onclick="handlePhotoSlotClick(0)">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop" alt="Photo 1" class="slot-image">
                            <span class="main-label">Main</span>
                            <div class="photo-actions">
                                <button class="photo-action-btn edit-btn" onclick="event.stopPropagation(); editPhoto(0)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </button>
                                <button class="photo-action-btn delete-btn" onclick="event.stopPropagation(); removePhoto(0)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Photo Slot 2 -->
                        <div class="photo-slot" id="photoSlot1" onclick="handlePhotoSlotClick(1)">
                            <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=300&h=400&fit=crop" alt="Photo 2" class="slot-image">
                            <div class="photo-actions">
                                <button class="photo-action-btn edit-btn" onclick="event.stopPropagation(); editPhoto(1)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </button>
                                <button class="photo-action-btn delete-btn" onclick="event.stopPropagation(); removePhoto(1)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Photo Slot 3 -->
                        <div class="photo-slot" id="photoSlot2" onclick="handlePhotoSlotClick(2)">
                            <img src="https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?w=300&h=400&fit=crop" alt="Photo 3" class="slot-image">
                            <div class="photo-actions">
                                <button class="photo-action-btn edit-btn" onclick="event.stopPropagation(); editPhoto(2)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </button>
                                <button class="photo-action-btn delete-btn" onclick="event.stopPropagation(); removePhoto(2)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Photo Slot 4 (Empty) -->
                        <div class="photo-slot empty" id="photoSlot3" onclick="handlePhotoSlotClick(3)">
                            <div class="empty-slot-content">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                <span>Add Photo</span>
                            </div>
                        </div>
                        
                        <!-- Photo Slot 5 (Empty) -->
                        <div class="photo-slot empty" id="photoSlot4" onclick="handlePhotoSlotClick(4)">
                            <div class="empty-slot-content">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                <span>Add Photo</span>
                            </div>
                        </div>
                        
                        <!-- Photo Slot 6 (Empty) -->
                        <div class="photo-slot empty" id="photoSlot5" onclick="handlePhotoSlotClick(5)">
                            <div class="empty-slot-content">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"/>
                                    <line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                <span>Add Photo</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="photo-tips">
                        <h4>Photo Tips</h4>
                        <ul>
                            <li>ðŸ“¸ Use clear, well-lit photos</li>
                            <li>ðŸ˜Š Show your face in at least one photo</li>
                            <li>ðŸŽ¯ Add photos of your hobbies and interests</li>
                            <li>âŒ Avoid group photos as your main pic</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Edit Profile Screen -->
            <div class="screen edit-profile-screen" id="edit-profile">
                <div class="screen-header">
                    <button class="back-btn" onclick="saveProfileAndGoBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Edit Profile</h2>
                    <button class="save-btn" onclick="saveProfileAndGoBack()">Save</button>
                </div>
                
                <!-- Profile Visibility Counter Bar -->
                <div class="matches-counter-bar" id="profileVisibilityBar" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);">
                    <span class="counter-number" id="profileVisibilityCount">0</span>
                    <span class="counter-label">users will see your profile</span>
                </div>
                
                <div class="edit-profile-content">
                    <!-- Photos Section - Link to Photo Manager -->
                    <div class="edit-section">
                        <div class="section-header-row">
                            <h4>Photos</h4>
                            <button class="btn btn-text btn-small" onclick="showScreen('manage-photos')">Manage â†’</button>
                        </div>
                        <div class="photo-preview-row" id="editProfilePhotoPreview">
                            <!-- Photos will be populated dynamically from user's uploaded photos -->
                        </div>
                    </div>

                    <!-- Basic Info Section -->
                    <div class="edit-section">
                        <h4>Basic Info</h4>
                        <div class="input-group">
                            <label>First Name</label>
                            <input type="text" id="editFirstName" value="Matt" placeholder="Your first name">
                        </div>
                        <div class="input-row">
                            <div class="input-group half">
                                <label>Birthday</label>
                                <input type="date" id="editBirthday" onchange="updateAgeFromBirthday()">
                            </div>
                            <div class="input-group half">
                                <label>Age <span style="font-size: 0.75rem; color: var(--text-muted);">(auto-calculated)</span></label>
                                <input type="number" id="editAge" value="29" min="18" max="100" readonly style="background: var(--bg-tertiary); cursor: not-allowed;">
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Location</label>
                            <input type="text" id="editLocation" value="New York, NY" placeholder="City, State">
                        </div>
                    </div>

                    <!-- Work & Education Section -->
                    <div class="edit-section">
                        <h4>Work & Education</h4>
                        <div class="input-group">
                            <label>Occupation</label>
                            <input type="text" id="editOccupation" value="Software Engineer" placeholder="What do you do?">
                        </div>
                        <div class="input-group">
                            <label>Company</label>
                            <input type="text" id="editCompany" value="" placeholder="Where do you work?">
                        </div>
                        <div class="input-group">
                            <label>Education Level</label>
                            <select id="editEducation">
                                <option value="">Select education level</option>
                                <option value="high-school">High School</option>
                                <option value="some-college">Some College</option>
                                <option value="associates">Associate's Degree</option>
                                <option value="bachelors" selected>Bachelor's Degree</option>
                                <option value="masters">Master's Degree</option>
                                <option value="doctorate">Doctorate</option>
                                <option value="trade">Trade School</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>School</label>
                            <input type="text" id="editSchool" value="" placeholder="Where did you study?">
                        </div>
                    </div>

                    <!-- Physical Attributes Section -->
                    <div class="edit-section">
                        <h4>Physical Attributes</h4>
                        <div class="input-row">
                            <div class="input-group half">
                                <label>Height</label>
                                <select id="editHeight">
                                    <option value="">Select height</option>
                                    <option value="5'0">5'0" (152 cm)</option>
                                    <option value="5'1">5'1" (155 cm)</option>
                                    <option value="5'2">5'2" (157 cm)</option>
                                    <option value="5'3">5'3" (160 cm)</option>
                                    <option value="5'4">5'4" (163 cm)</option>
                                    <option value="5'5">5'5" (165 cm)</option>
                                    <option value="5'6">5'6" (168 cm)</option>
                                    <option value="5'7">5'7" (170 cm)</option>
                                    <option value="5'8">5'8" (173 cm)</option>
                                    <option value="5'9">5'9" (175 cm)</option>
                                    <option value="5'10" selected>5'10" (178 cm)</option>
                                    <option value="5'11">5'11" (180 cm)</option>
                                    <option value="6'0">6'0" (183 cm)</option>
                                    <option value="6'1">6'1" (185 cm)</option>
                                    <option value="6'2">6'2" (188 cm)</option>
                                    <option value="6'3">6'3" (190 cm)</option>
                                    <option value="6'4">6'4" (193 cm)</option>
                                    <option value="6'5+">6'5"+ (196+ cm)</option>
                                </select>
                            </div>
                            <div class="input-group half">
                                <label>Body Type</label>
                                <select id="editBodyType">
                                    <option value="">Select body type</option>
                                    <option value="slim">Slim</option>
                                    <option value="athletic" selected>Athletic</option>
                                    <option value="average">Average</option>
                                    <option value="curvy">Curvy</option>
                                    <option value="muscular">Muscular</option>
                                    <option value="plus-size">Plus Size</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label>Ethnicity</label>
                            <select id="editEthnicity">
                                <option value="">Prefer not to say</option>
                                <option value="asian">Asian</option>
                                <option value="black">Black / African Descent</option>
                                <option value="hispanic">Hispanic / Latino</option>
                                <option value="middle-eastern">Middle Eastern</option>
                                <option value="native">Native American</option>
                                <option value="pacific">Pacific Islander</option>
                                <option value="white" selected>White / Caucasian</option>
                                <option value="mixed">Mixed</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <!-- Lifestyle Section -->
                    <div class="edit-section">
                        <h4>Lifestyle</h4>
                        <div class="input-row">
                            <div class="input-group half">
                                <label>Drinking</label>
                                <select id="editDrinking">
                                    <option value="">Select</option>
                                    <option value="never">Never</option>
                                    <option value="rarely">Rarely</option>
                                    <option value="socially" selected>Socially</option>
                                    <option value="regularly">Regularly</option>
                                </select>
                            </div>
                            <div class="input-group half">
                                <label>Smoking</label>
                                <select id="editSmoking">
                                    <option value="">Select</option>
                                    <option value="never" selected>Never</option>
                                    <option value="sometimes">Sometimes</option>
                                    <option value="regularly">Regularly</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group half">
                                <label>Exercise</label>
                                <select id="editExercise">
                                    <option value="">Select</option>
                                    <option value="never">Never</option>
                                    <option value="sometimes">Sometimes</option>
                                    <option value="regularly" selected>Regularly</option>
                                    <option value="daily">Daily</option>
                                </select>
                            </div>
                            <div class="input-group half">
                                <label>Diet</label>
                                <select id="editDiet">
                                    <option value="">Select</option>
                                    <option value="anything" selected>Anything</option>
                                    <option value="vegetarian">Vegetarian</option>
                                    <option value="vegan">Vegan</option>
                                    <option value="pescatarian">Pescatarian</option>
                                    <option value="keto">Keto</option>
                                    <option value="halal">Halal</option>
                                    <option value="kosher">Kosher</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Family & Religion Section -->
                    <div class="edit-section">
                        <h4>Family & Religion</h4>
                        <div class="input-group">
                            <label>Children</label>
                            <select id="editChildren">
                                <option value="">Select</option>
                                <option value="no-dont-want">Don't have, don't want</option>
                                <option value="no-want-someday" selected>Don't have, want someday</option>
                                <option value="no-not-sure">Don't have, not sure</option>
                                <option value="yes-live-with">Have, live with me</option>
                                <option value="yes-dont-live">Have, don't live with me</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Religion</label>
                            <select id="editReligion">
                                <option value="">Prefer not to say</option>
                                <option value="agnostic">Agnostic</option>
                                <option value="atheist">Atheist</option>
                                <option value="buddhist">Buddhist</option>
                                <option value="catholic">Catholic</option>
                                <option value="christian" selected>Christian</option>
                                <option value="hindu">Hindu</option>
                                <option value="jewish">Jewish</option>
                                <option value="muslim">Muslim</option>
                                <option value="spiritual">Spiritual</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Political Views</label>
                            <select id="editPolitics">
                                <option value="">Prefer not to say</option>
                                <option value="liberal">Liberal</option>
                                <option value="moderate" selected>Moderate</option>
                                <option value="conservative">Conservative</option>
                                <option value="not-political">Not Political</option>
                            </select>
                        </div>
                    </div>

                    <!-- About Section -->
                    <div class="edit-section">
                        <h4>About Me</h4>
                        <div class="input-group">
                            <label>Bio <span class="char-count" id="bioCharCount">0/300</span></label>
                            <textarea id="editBio" placeholder="Tell potential matches about yourself..." maxlength="300" oninput="updateCharCount()">Looking for someone to share adventures with. Love hiking, photography, and trying new restaurants. Let's grab coffee!</textarea>
                        </div>
                    </div>

                    <!-- Interests Section -->
                    <div class="edit-section">
                        <h4>Interests</h4>
                        <p class="section-hint">Select up to 6 interests</p>
                        <div class="interests-selector">
                            <button class="interest-chip selected" onclick="toggleInterest(this)">ðŸ“¸ Photography</button>
                            <button class="interest-chip selected" onclick="toggleInterest(this)">ðŸ¥¾ Hiking</button>
                            <button class="interest-chip selected" onclick="toggleInterest(this)">â˜• Coffee</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸŽµ Music</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ³ Cooking</button>
                            <button class="interest-chip selected" onclick="toggleInterest(this)">âœˆï¸ Travel</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ“š Reading</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸŽ® Gaming</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸŽ¨ Art</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ‹ï¸ Fitness</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸŽ¬ Movies</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ· Wine</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ• Dogs</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ± Cats</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸ§˜ Yoga</button>
                            <button class="interest-chip" onclick="toggleInterest(this)">ðŸŽ¯ Sports</button>
                        </div>
                    </div>

                    <!-- Looking For Section -->
                    <div class="edit-section">
                        <h4>Looking For</h4>
                        <div class="looking-for-options">
                            <button class="looking-option selected" onclick="selectLookingFor(this, 'relationship')">
                                <span class="option-icon">ðŸ’•</span>
                                <span class="option-text">Long-term relationship</span>
                            </button>
                            <button class="looking-option" onclick="selectLookingFor(this, 'casual')">
                                <span class="option-icon">ðŸ˜Š</span>
                                <span class="option-text">Something casual</span>
                            </button>
                        </div>
                    </div>

                    <!-- Safety - Emergency Contact Section -->
                    <div class="edit-section emergency-contact-section">
                        <div class="section-header-with-icon">
                            <span class="section-icon">ðŸ›¡ï¸</span>
                            <div>
                                <h4>Emergency Contact</h4>
                                <p class="section-description">We'll notify them when you're on a date with details about where you are</p>
                            </div>
                        </div>
                        
                        <div class="emergency-contact-card" id="emergencyContactCard">
                            <div class="no-contact-state" id="noEmergencyContact">
                                <div class="no-contact-icon">ðŸ‘¤</div>
                                <p>No emergency contact added</p>
                                <button class="btn btn-secondary btn-small" onclick="showAddEmergencyContact()">
                                    + Add Contact
                                </button>
                            </div>
                            
                            <div class="contact-added-state" id="emergencyContactAdded" style="display: none;">
                                <div class="contact-info">
                                    <div class="contact-avatar">ðŸ‘¤</div>
                                    <div class="contact-details">
                                        <span class="contact-name" id="emergencyContactName">-</span>
                                        <span class="contact-phone" id="emergencyContactPhone">-</span>
                                    </div>
                                    <span class="alerts-badge" id="alertsStatusBadge" style="background: var(--success); color: white; font-size: 0.65rem; padding: 2px 8px; border-radius: 10px;">Alerts ON</span>
                                </div>
                                <div class="contact-actions">
                                    <button class="btn btn-text btn-small" onclick="showAddEmergencyContact()">Edit</button>
                                    <button class="btn btn-text btn-small" onclick="toggleEmergencyAlerts()">Toggle Alerts</button>
                                    <button class="btn btn-text btn-small danger" onclick="removeEmergencyContact()">Remove</button>
                                </div>
                            </div>
                            
                            <!-- Quick Safety Actions -->
                            <div class="quick-safety-actions" id="quickSafetyActions" style="display: none; margin-top: 12px; padding: 12px; background: var(--bg-tertiary); border-radius: 8px;">
                                <p style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px;">Quick Actions:</p>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn btn-secondary btn-small" onclick="sendCheckInAlert()" style="flex: 1; font-size: 0.75rem;">
                                        âœ… Check In
                                    </button>
                                    <button class="btn btn-small" onclick="sendSOSAlert()" style="flex: 1; font-size: 0.75rem; background: var(--danger); color: white;">
                                        ðŸš¨ SOS Alert
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Alert History -->
                            <div class="alert-history" id="alertHistorySection" style="display: none; margin-top: 12px;">
                                <p style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 8px;">Recent Alerts:</p>
                                <div id="alertHistoryList" style="max-height: 100px; overflow-y: auto;"></div>
                            </div>
                        </div>
                        
                        <div class="safety-features-list">
                            <div class="safety-feature">
                                <span class="feature-icon">ðŸ“</span>
                                <span class="feature-text">Location shared when date starts</span>
                            </div>
                            <div class="safety-feature">
                                <span class="feature-icon">ðŸ‘¤</span>
                                <span class="feature-text">Match's name & photo included</span>
                            </div>
                            <div class="safety-feature">
                                <span class="feature-icon">â°</span>
                                <span class="feature-text">Date time & venue sent</span>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Button -->
                    <button class="btn btn-secondary" onclick="previewProfile()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                            <circle cx="12" cy="12" r="3"/>
                        </svg>
                        Preview Profile
                    </button>
                </div>
            </div>

            <!-- Settings Screen -->
            <div class="screen settings-screen" id="settings">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Settings</h2>
                </div>
                <div class="settings-content">
                    <div class="settings-section">
                        <h4>Account</h4>
                        <div class="settings-list">
                            <div class="settings-item clickable" onclick="showEditEmail()">
                                <span>Email</span>
                                <div class="settings-value-row">
                                    <span class="settings-value" id="settingsEmail">matt@example.com</span>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                            </div>
                            </div>
                            <div class="settings-item clickable" onclick="showEditPhone()">
                                <span>Phone</span>
                                <div class="settings-value-row">
                                    <span class="settings-value" id="settingsPhone">+1 (555) 123-4567</span>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                            </div>
                            </div>
                            <div class="settings-item clickable" onclick="showChangePassword()">
                                <span>Change Password</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Notifications</h4>
                        <div class="settings-list">
                            <div class="settings-item">
                                <span>New Matches</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="notifyMatches" checked onchange="toggleNotification('matches', this.checked)">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <span>Messages</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="notifyMessages" checked onchange="toggleNotification('messages', this.checked)">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <span>Date Reminders</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="notifyDates" checked onchange="toggleNotification('dates', this.checked)">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <span>Safety Alerts</span>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="notifySafety" checked onchange="toggleNotification('safety', this.checked)">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Subscription</h4>
                        <div class="subscription-card">
                            <div class="subscription-info">
                                <span class="subscription-status" id="settingsSubStatus">Active</span>
                                <p id="settingsSubDetails">$10/month â€¢ Renews <span id="settingsRenewalDate">loading...</span></p>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="showScreen('manage-subscription')">Manage</button>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h4>Support</h4>
                        <div class="settings-list">
                            <div class="settings-item">
                                <span>Help Center</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showSafetyTips()">
                                <span>Safety Tips</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showReportProblem()">
                                <span>Report a Problem</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showContactSupport()">
                                <span>Contact Support</span>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                        </div>
                    </div>
                    </div>
                    <button class="btn btn-secondary" onclick="exportMyProfile()" style="width: 100%; margin-bottom: 12px;">
                        <span style="margin-right: 8px;">ðŸ“¤</span> Export My Profile Data
                    </button>
                    <button class="btn btn-text logout-btn" onclick="logout()">Log Out</button>
                    <button class="btn btn-text danger delete-account-btn" onclick="resetAllData()">Delete Account & Data</button>
                </div>
            </div>

            <!-- Safety Tips Modal -->
            <div class="modal" id="safety-tips-modal">
                <div class="modal-content support-modal-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="support-modal-header">
                        <div class="support-icon safety">ðŸ›¡ï¸</div>
                        <h2>Safety Tips</h2>
                    </div>
                    <div class="safety-tips-list">
                        <div class="safety-tip">
                            <span class="tip-number">1</span>
                            <div class="tip-content">
                                <h4>Meet in Public</h4>
                                <p>Always meet your match in a public place for the first few dates.</p>
                            </div>
                        </div>
                        <div class="safety-tip">
                            <span class="tip-number">2</span>
                            <div class="tip-content">
                                <h4>Tell Someone</h4>
                                <p>Let a friend or family member know where you're going and who you're meeting.</p>
                            </div>
                        </div>
                        <div class="safety-tip">
                            <span class="tip-number">3</span>
                            <div class="tip-content">
                                <h4>Trust Your Instincts</h4>
                                <p>If something feels off, it's okay to leave or end the conversation.</p>
                            </div>
                        </div>
                        <div class="safety-tip">
                            <span class="tip-number">4</span>
                            <div class="tip-content">
                                <h4>Don't Share Personal Info</h4>
                                <p>Avoid sharing your address, workplace, or financial details early on.</p>
                            </div>
                        </div>
                        <div class="safety-tip">
                            <span class="tip-number">5</span>
                            <div class="tip-content">
                                <h4>Video Chat First</h4>
                                <p>Consider a video call before meeting in person to verify who you're talking to.</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-block" onclick="closeModal()">Got It</button>
                </div>
            </div>

            <!-- Report Problem Modal -->
            <div class="modal" id="report-problem-modal">
                <div class="modal-content support-modal-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="support-modal-header">
                        <div class="support-icon report">âš ï¸</div>
                        <h2>Report a Problem</h2>
                    </div>
                    <form class="report-form" onsubmit="submitReport(event)">
                        <div class="form-group">
                            <label>What would you like to report?</label>
                            <select id="reportType" required>
                                <option value="">Select a category</option>
                                <option value="inappropriate">Inappropriate behavior</option>
                                <option value="fake-profile">Fake or scam profile</option>
                                <option value="harassment">Harassment</option>
                                <option value="offensive-content">Offensive content</option>
                                <option value="bug">App bug or issue</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="reportDescription" placeholder="Please describe the issue in detail..." rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="reportBlock">
                                <span class="checkbox-custom"></span>
                                <span>Also block this user</span>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">Submit Report</button>
                    </form>
                </div>
            </div>

            <!-- Contact Support Modal -->
            <div class="modal" id="contact-support-modal">
                <div class="modal-content support-modal-content">
                    <button class="modal-close" onclick="closeModal()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    <div class="support-modal-header">
                        <div class="support-icon contact">ðŸ’¬</div>
                        <h2>Contact Support</h2>
                        <p class="support-subtitle">We're here to help!</p>
                    </div>
                    
                    <div class="support-options">
                        <div class="support-option" onclick="openEmail()">
                            <div class="option-icon">ðŸ“§</div>
                            <div class="option-content">
                                <h4>Email Us</h4>
                                <p>support@oith.app</p>
                            </div>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                        <div class="support-option" onclick="openLiveChat()">
                            <div class="option-icon">ðŸ’¬</div>
                            <div class="option-content">
                                <h4>Live Chat</h4>
                                <p>Available 9am - 6pm EST</p>
                            </div>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                        <div class="support-option" onclick="openFAQ()">
                            <div class="option-icon">â“</div>
                            <div class="option-content">
                                <h4>FAQ</h4>
                                <p>Common questions answered</p>
                            </div>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </div>
                    </div>
                    
                    <div class="support-form-section">
                        <h4>Or send us a message</h4>
                        <form class="support-form" onsubmit="submitSupportMessage(event)">
                            <div class="form-group">
                                <label>Subject</label>
                                <select id="supportSubject" required>
                                    <option value="">Select a topic</option>
                                    <option value="account">Account issues</option>
                                    <option value="billing">Billing & payments</option>
                                    <option value="matches">Matching questions</option>
                                    <option value="technical">Technical problems</option>
                                    <option value="feedback">Feedback & suggestions</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Message</label>
                                <textarea id="supportMessage" placeholder="How can we help you?" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">Send Message</button>
                        </form>
                    </div>
                    
                    <p class="response-note">We typically respond within 24 hours</p>
                </div>
            </div>

            <!-- Safety & Privacy Screen -->
            <div class="screen safety-privacy-screen" id="safety-privacy">
                <div class="screen-header">
                    <button class="back-btn" onclick="goBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Safety & Privacy</h2>
                </div>
                <div class="safety-privacy-content">
                    <div class="safety-header-banner">
                        <div class="safety-banner-icon">ðŸ›¡ï¸</div>
                        <h3>Your Safety Matters</h3>
                        <p>We're committed to keeping you safe while finding meaningful connections.</p>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Safety Resources</h4>
                        <div class="settings-list">
                            <div class="settings-item clickable" onclick="showSafetyTips()">
                                <div class="settings-item-icon">ðŸ“‹</div>
                                <div class="settings-item-content">
                                    <span>Safety Tips</span>
                                    <span class="settings-item-desc">Dating safety guidelines</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showReportProblem()">
                                <div class="settings-item-icon">âš ï¸</div>
                                <div class="settings-item-content">
                                    <span>Report a Problem</span>
                                    <span class="settings-item-desc">Report inappropriate behavior</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showContactSupport()">
                                <div class="settings-item-icon">ðŸ’¬</div>
                                <div class="settings-item-content">
                                    <span>Contact Support</span>
                                    <span class="settings-item-desc">Get help from our team</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Privacy Controls</h4>
                        <div class="settings-list">
                            <div class="settings-item">
                                <div class="settings-item-icon">ðŸ‘ï¸</div>
                                <div class="settings-item-content">
                                    <span>Profile Visibility</span>
                                    <span class="settings-item-desc">Control who sees your profile</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked onchange="toggleProfileVisibility()">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-icon">ðŸ“</div>
                                <div class="settings-item-content">
                                    <span>Show Distance</span>
                                    <span class="settings-item-desc">Show how far you are from matches</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-icon">âœ“</div>
                                <div class="settings-item-content">
                                    <span>Read Receipts</span>
                                    <span class="settings-item-desc">Let matches know when you've read messages</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="settings-item">
                                <div class="settings-item-icon">ðŸŸ¢</div>
                                <div class="settings-item-content">
                                    <span>Online Status</span>
                                    <span class="settings-item-desc">Show when you're active</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Blocked Users</h4>
                        <div class="settings-list">
                            <div class="settings-item clickable" onclick="showBlockedUsers()">
                                <div class="settings-item-icon">ðŸš«</div>
                                <div class="settings-item-content">
                                    <span>Manage Blocked Users</span>
                                    <span class="settings-item-desc">View and unblock users</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Data & Privacy</h4>
                        <div class="settings-list">
                            <div class="settings-item clickable" onclick="downloadMyData()">
                                <div class="settings-item-icon">ðŸ“¥</div>
                                <div class="settings-item-content">
                                    <span>Download My Data</span>
                                    <span class="settings-item-desc">Get a copy of your data</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                            <div class="settings-item clickable" onclick="showPrivacyPolicy()">
                                <div class="settings-item-icon">ðŸ“„</div>
                                <div class="settings-item-content">
                                    <span>Privacy Policy</span>
                                    <span class="settings-item-desc">How we handle your data</span>
                                </div>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18l6-6-6-6"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Feedback & Metrics Screen -->
            <div class="screen feedback-metrics-screen" id="feedback-metrics">
                <div class="screen-header">
                    <button class="back-btn" onclick="goBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Feedback & Metrics</h2>
                </div>
                <div class="feedback-metrics-content">
                    <!-- Overview Stats -->
                    <div class="metrics-overview">
                        <div class="metric-stat-card">
                            <div class="metric-stat-value" id="totalMatchesCount">12</div>
                            <div class="metric-stat-label">Total Matches</div>
                        </div>
                        <div class="metric-stat-card">
                            <div class="metric-stat-value" id="totalDatesCount">3</div>
                            <div class="metric-stat-label">Dates Planned</div>
                        </div>
                        <div class="metric-stat-card">
                            <div class="metric-stat-value" id="responseRateValue">89%</div>
                            <div class="metric-stat-label">Response Rate</div>
                        </div>
                        <div class="metric-stat-card">
                            <div class="metric-stat-value" id="avgConvoLength">24</div>
                            <div class="metric-stat-label">Avg Messages</div>
                        </div>
                    </div>

                    <!-- Match Activity Chart -->
                    <div class="metrics-section">
                        <h4>Match Activity</h4>
                        <div class="activity-chart" id="userMatchActivityChart">
                            <!-- Populated by JS with real match data -->
                        </div>
                    </div>

                    <!-- Your Match Type -->
                    <div class="metrics-section">
                        <h4>Your Match Type</h4>
                        <p class="section-subtitle">Based on your match history, here's who you connect with most:</p>
                        
                        <div class="match-type-card">
                            <div class="match-type-header">
                                <span class="match-type-icon">ðŸ’•</span>
                                <h5>Most Compatible Profile</h5>
                            </div>
                            <div class="match-type-stats">
                                <div class="type-stat">
                                    <span class="type-stat-label">Average Age</span>
                                    <span class="type-stat-value" id="avgMatchAge">27-32</span>
                                </div>
                                <div class="type-stat">
                                    <span class="type-stat-label">Hair Color</span>
                                    <span class="type-stat-value" id="commonHairColor">Brown (65%)</span>
                                </div>
                                <div class="type-stat">
                                    <span class="type-stat-label">Height</span>
                                    <span class="type-stat-value" id="avgMatchHeight">5'4" - 5'7"</span>
                                </div>
                                <div class="type-stat">
                                    <span class="type-stat-label">Education</span>
                                    <span class="type-stat-value" id="commonEducation">Bachelor's (72%)</span>
                                </div>
                                <div class="type-stat">
                                    <span class="type-stat-label">Top Occupation</span>
                                    <span class="type-stat-value" id="commonOccupation">Healthcare / Tech</span>
                                </div>
                                <div class="type-stat">
                                    <span class="type-stat-label">Body Type</span>
                                    <span class="type-stat-value" id="commonBodyType">Athletic (58%)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Shared Interests -->
                    <div class="metrics-section">
                        <h4>Top Shared Interests</h4>
                        <div class="shared-interests-list">
                            <div class="interest-metric">
                                <span class="interest-name">â˜• Coffee</span>
                                <div class="interest-bar-container">
                                    <div class="interest-bar" style="width: 85%"></div>
                                </div>
                                <span class="interest-percent">85%</span>
                            </div>
                            <div class="interest-metric">
                                <span class="interest-name">ðŸ“¸ Photography</span>
                                <div class="interest-bar-container">
                                    <div class="interest-bar" style="width: 72%"></div>
                                </div>
                                <span class="interest-percent">72%</span>
                            </div>
                            <div class="interest-metric">
                                <span class="interest-name">ðŸ¥¾ Hiking</span>
                                <div class="interest-bar-container">
                                    <div class="interest-bar" style="width: 68%"></div>
                                </div>
                                <span class="interest-percent">68%</span>
                            </div>
                            <div class="interest-metric">
                                <span class="interest-name">ðŸŽµ Music</span>
                                <div class="interest-bar-container">
                                    <div class="interest-bar" style="width: 54%"></div>
                                </div>
                                <span class="interest-percent">54%</span>
                            </div>
                            <div class="interest-metric">
                                <span class="interest-name">âœˆï¸ Travel</span>
                                <div class="interest-bar-container">
                                    <div class="interest-bar" style="width: 48%"></div>
                                </div>
                                <span class="interest-percent">48%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Conversation Insights -->
                    <div class="metrics-section">
                        <h4>Conversation Insights</h4>
                        <div class="conversation-insights">
                            <div class="insight-item">
                                <div class="insight-icon">â±ï¸</div>
                                <div class="insight-content">
                                    <span class="insight-label">Avg Response Time</span>
                                    <span class="insight-value" id="avgResponseTimeMetric">8 minutes</span>
                                </div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-icon">ðŸ’¬</div>
                                <div class="insight-content">
                                    <span class="insight-label">Messages Sent</span>
                                    <span class="insight-value" id="totalMessagesSent">156</span>
                                </div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-icon">ðŸ“…</div>
                                <div class="insight-content">
                                    <span class="insight-label">Best Day to Match</span>
                                    <span class="insight-value" id="bestMatchDay">Friday</span>
                                </div>
                            </div>
                            <div class="insight-item">
                                <div class="insight-icon">ðŸŽ¯</div>
                                <div class="insight-content">
                                    <span class="insight-label">Date Success Rate</span>
                                    <span class="insight-value" id="dateSuccessRate">75%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Feedback Received Section -->
                    <div class="metrics-section feedback-section">
                        <h4>ðŸ“¬ Feedback Received</h4>
                        <p class="section-subtitle">What matches said when ending connections</p>
                        <div class="feedback-list" id="feedbackReceivedList">
                            <!-- Dynamically populated by renderFeedbackReceived() -->
                        </div>
                    </div>

                    <!-- Feedback Given Section -->
                    <div class="metrics-section feedback-section">
                        <h4>ðŸ“¤ Feedback You've Given</h4>
                        <p class="section-subtitle">Your reasons for ending past matches</p>
                        <div class="feedback-list" id="feedbackGivenList">
                            <!-- Dynamically populated by renderFeedbackGiven() -->
                        </div>
                        <div class="feedback-summary">
                            <div class="summary-stat">
                                <span class="summary-value" id="totalMatchesEnded">0</span>
                                <span class="summary-label">Matches Ended</span>
                            </div>
                            <div class="summary-stat">
                                <span class="summary-value" id="avgMatchDuration">â€”</span>
                                <span class="summary-label">Avg Duration</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tips Section -->
                    <div class="metrics-section tips-section">
                        <h4>ðŸ’¡ Tips to Improve</h4>
                        <ul class="tips-list" id="tipsToImproveList">
                            <!-- Dynamically populated based on metrics -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Waiting for Next Match Screen - ONE MATCH AT A TIME -->
            <div class="screen waiting-match-screen" id="waiting-match">
                <div class="app-header">
                    <div class="logo-small">OITH</div>
                </div>
                <div class="waiting-match-content">
                    <div class="waiting-illustration">
                        <!-- Bird in hand illustration -->
                        <svg width="140" height="140" viewBox="0 0 100 100" fill="none">
                            <circle cx="50" cy="50" r="45" stroke="var(--accent)" stroke-width="2" stroke-dasharray="8 4" opacity="0.3"/>
                            <circle cx="50" cy="50" r="35" fill="var(--accent-light)"/>
                            <!-- Hand holding bird -->
                            <path d="M30 65 C25 58, 23 48, 28 40 C33 32, 42 26, 50 26 C58 26, 67 32, 72 40 C77 48, 75 58, 70 67" 
                                  stroke="var(--accent)" stroke-width="2" fill="none" stroke-linecap="round"/>
                            <!-- Bird body -->
                            <ellipse cx="50" cy="42" rx="14" ry="10" fill="var(--accent)"/>
                            <!-- Bird head -->
                            <circle cx="60" cy="35" r="7" fill="var(--accent)"/>
                            <!-- Bird beak -->
                            <path d="M67 35 L74 33 L67 38Z" fill="#A84639"/>
                            <!-- Bird eye -->
                            <circle cx="62" cy="34" r="1.5" fill="white"/>
                            <!-- Pulsing dot -->
                            <circle cx="50" cy="70" r="4" fill="var(--accent)" class="pulse-dot"/>
                        </svg>
                    </div>
                    <h2>Finding your next match</h2>
                    <p class="waiting-message">We're finding someone truly compatible for you. Great matches can't be rushed.</p>
                    <div class="countdown-container">
                        <span class="countdown-label">Next match in</span>
                        <span class="countdown-time" id="nextMatchCountdown">--:--</span>
                    </div>
                    
                    <!-- Adjust Preferences Option -->
                    <div class="adjust-preferences-card">
                        <h4>Not finding the right matches?</h4>
                        <p>Fine-tune your preferences to improve compatibility</p>
                        <button class="btn btn-secondary" onclick="showScreen('adjust-preferences')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="21" x2="4" y2="14"/>
                                <line x1="4" y1="10" x2="4" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12" y2="3"/>
                                <line x1="20" y1="21" x2="20" y2="16"/>
                                <line x1="20" y1="12" x2="20" y2="3"/>
                                <circle cx="4" cy="12" r="2"/>
                                <circle cx="12" cy="10" r="2"/>
                                <circle cx="20" cy="14" r="2"/>
                            </svg>
                            Adjust Preferences
                        </button>
                    </div>
                    
                    <div class="one-match-philosophy">
                        <div class="philosophy-icon">ðŸ¦</div>
                        <p><em>"A bird in the hand is worth two in the bush"</em></p>
                        <p class="philosophy-subtext">One profile at a time, for focused connections.</p>
                    </div>
                </div>
                <nav class="bottom-nav">
                    <button class="nav-btn active">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>
            
            <!-- Manage Subscription Screen -->
            <div class="screen subscription-screen" id="manage-subscription">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('settings')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Subscription</h2>
                </div>
                <div class="subscription-content">
                    <!-- Current Plan -->
                    <div class="current-plan-card">
                        <div class="plan-badge">Current Plan</div>
                        <h3 id="currentPlanName">Premium Monthly</h3>
                        <div class="plan-price">
                            <span class="price">$10</span>
                            <span class="period">/month</span>
                        </div>
                        <p class="plan-status" id="planStatus">Active â€¢ Renews <span id="subscriptionRenewalDate">loading...</span></p>
                    </div>
                    
                    <!-- Plan Features -->
                    <div class="plan-features">
                        <h4>Your Benefits</h4>
                        <ul class="feature-list">
                            <li>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>One quality match per day</span>
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>AI-powered compatibility matching</span>
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Unlimited messaging with matches</span>
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>AI date planning assistance</span>
                            </li>
                            <li>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                                <span>Read receipts & typing indicators</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Current Plan Info -->
                    <div class="available-plans">
                        <h4>Your Plan</h4>
                        <div class="plan-options">
                            <div class="plan-option selected">
                                <div class="plan-option-header">
                                    <input type="radio" name="plan" id="planMonthly" value="monthly" checked>
                                    <label for="planMonthly">
                                        <span class="plan-name">Monthly Subscription</span>
                                        <span class="plan-cost">$10/mo</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Billing Info -->
                    <div class="billing-section">
                        <h4>Payment Method</h4>
                        <div class="payment-method-card">
                            <div class="card-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                                    <line x1="1" y1="10" x2="23" y2="10"/>
                                </svg>
                            </div>
                            <div class="card-details">
                                <span class="card-type">Visa ending in 4242</span>
                                <span class="card-expiry">Expires 12/25</span>
                            </div>
                            <button class="btn btn-text" onclick="showUpdatePayment()">Update</button>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="subscription-actions">
                        <button class="btn btn-primary btn-block" onclick="updateSubscription()">
                            Update Subscription
                        </button>
                        <button class="btn btn-text btn-block cancel-link" onclick="showCancelSubscription()">
                            Cancel Subscription
                        </button>
                    </div>
                    
                    <!-- Billing History -->
                    <div class="billing-history">
                        <h4>Billing History</h4>
                        <div class="history-list" id="billingHistoryList">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Match Preferences Screen -->
            <div class="screen match-preferences-screen" id="match-preferences">
                <div class="screen-header">
                    <button class="back-btn" onclick="goBack()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Match Preferences</h2>
                    <button class="btn btn-text" onclick="saveMatchPreferences()">Save</button>
                </div>
                
                <!-- Available Matches Counter Bar -->
                <div class="matches-counter-bar" id="matchPrefCounterBar">
                    <span class="counter-number" id="matchPrefCount">4</span>
                    <span class="counter-label">matches available</span>
                </div>
                
                <div class="match-preferences-content">
                    <p class="preferences-intro-text">Filter potential matches by your preferences. Changes apply to future matches.</p>
                    
                    <!-- Basic Preferences -->
                    <div class="pref-section">
                        <h4>Basic Preferences</h4>
                        
                        <div class="pref-item">
                            <label>I'm interested in</label>
                            <div class="toggle-group">
                                <button class="toggle-btn" onclick="setMatchPref('interestedIn', 'women', this)">Women</button>
                                <button class="toggle-btn" onclick="setMatchPref('interestedIn', 'men', this)">Men</button>
                                <button class="toggle-btn active" onclick="setMatchPref('interestedIn', 'everyone', this)">Everyone</button>
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Age Range</label>
                            <div class="range-display">
                                <span id="prefAgeMin">25</span> - <span id="prefAgeMax">35</span> years
                            </div>
                            <div class="range-slider dual">
                                <div class="range-track" id="prefAgeTrack"></div>
                                <input type="range" id="prefAgeMinSlider" min="18" max="60" value="18" oninput="updatePrefAgeRange()">
                                <input type="range" id="prefAgeMaxSlider" min="18" max="60" value="60" oninput="updatePrefAgeRange()">
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Maximum Distance</label>
                            <div class="range-display"><span id="prefDistance">100</span> miles</div>
                            <input type="range" id="prefDistanceSlider" min="1" max="100" value="100" class="pref-slider" oninput="updatePrefDistance()">
                        </div>
                    </div>
                    
                    <!-- Physical Preferences -->
                    <div class="pref-section">
                        <h4>Physical Preferences</h4>
                        
                        <div class="pref-item">
                            <label>Height</label>
                            <div class="pref-row">
                                <div class="pref-half">
                                    <span class="pref-sublabel">Min</span>
                                    <select id="prefHeightMin" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                        <option value="">Any</option>
                                        <option value="5'0">5'0"</option>
                                        <option value="5'2">5'2"</option>
                                        <option value="5'4">5'4"</option>
                                        <option value="5'6">5'6"</option>
                                        <option value="5'8">5'8"</option>
                                        <option value="5'10">5'10"</option>
                                        <option value="6'0">6'0"</option>
                                        <option value="6'2">6'2"</option>
                                    </select>
                                </div>
                                <div class="pref-half">
                                    <span class="pref-sublabel">Max</span>
                                    <select id="prefHeightMax" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                        <option value="">Any</option>
                                        <option value="5'4">5'4"</option>
                                        <option value="5'6">5'6"</option>
                                        <option value="5'8">5'8"</option>
                                        <option value="5'10">5'10"</option>
                                        <option value="6'0">6'0"</option>
                                        <option value="6'2">6'2"</option>
                                        <option value="6'4">6'4"</option>
                                        <option value="6'5+">6'5"+</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Body Type</label>
                            <div class="chip-selector" id="prefBodyType">
                                <button class="chip active" onclick="togglePrefChip(this, 'bodyType')">Any</button>
                                <button class="chip" onclick="togglePrefChip(this, 'bodyType')">Slim</button>
                                <button class="chip" onclick="togglePrefChip(this, 'bodyType')">Athletic</button>
                                <button class="chip" onclick="togglePrefChip(this, 'bodyType')">Average</button>
                                <button class="chip" onclick="togglePrefChip(this, 'bodyType')">Curvy</button>
                                <button class="chip" onclick="togglePrefChip(this, 'bodyType')">Muscular</button>
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Ethnicity</label>
                            <select id="prefEthnicity" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                <option value="">Open to all</option>
                                <option value="asian">Asian</option>
                                <option value="black">Black / African Descent</option>
                                <option value="hispanic">Hispanic / Latino</option>
                                <option value="middle-eastern">Middle Eastern</option>
                                <option value="white">White / Caucasian</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Lifestyle Preferences -->
                    <div class="pref-section">
                        <h4>Lifestyle</h4>
                        
                        <div class="pref-item">
                            <label>Education Level</label>
                            <select id="prefEducation" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                <option value="">Any</option>
                                <option value="high-school">High School</option>
                                <option value="some-college">Some College</option>
                                <option value="bachelors">Bachelor's Degree</option>
                                <option value="masters">Master's Degree</option>
                                <option value="doctorate">Doctorate</option>
                            </select>
                        </div>
                        
                        <div class="pref-item">
                            <label>Smoking</label>
                            <div class="chip-selector" id="prefSmoking">
                                <button class="chip active" onclick="togglePrefChip(this, 'smoking')">Any</button>
                                <button class="chip" onclick="togglePrefChip(this, 'smoking')">Never</button>
                                <button class="chip" onclick="togglePrefChip(this, 'smoking')">Sometimes</button>
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Drinking</label>
                            <div class="chip-selector" id="prefDrinking">
                                <button class="chip active" onclick="togglePrefChip(this, 'drinking')">Any</button>
                                <button class="chip" onclick="togglePrefChip(this, 'drinking')">Never</button>
                                <button class="chip" onclick="togglePrefChip(this, 'drinking')">Socially</button>
                                <button class="chip" onclick="togglePrefChip(this, 'drinking')">Regularly</button>
                            </div>
                        </div>
                        
                        <div class="pref-item">
                            <label>Exercise</label>
                            <select id="prefExercise" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                <option value="">Any</option>
                                <option value="never">Never</option>
                                <option value="sometimes">Sometimes</option>
                                <option value="regularly">Regularly</option>
                                <option value="daily">Daily</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Family & Values -->
                    <div class="pref-section">
                        <h4>Family & Values</h4>
                        
                        <div class="pref-item">
                            <label>Children</label>
                            <select id="prefChildren" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                <option value="">Any</option>
                                <option value="no-dont-want">Doesn't have, doesn't want</option>
                                <option value="no-want">Doesn't have, wants someday</option>
                                <option value="has">Has children</option>
                            </select>
                        </div>
                        
                        <div class="pref-item">
                            <label>Religion</label>
                            <select id="prefReligion" onchange="savePrefToState(); updateMatchPreferencesCounter();">
                                <option value="">Any</option>
                                <option value="agnostic">Agnostic</option>
                                <option value="atheist">Atheist</option>
                                <option value="buddhist">Buddhist</option>
                                <option value="christian">Christian</option>
                                <option value="catholic">Catholic</option>
                                <option value="hindu">Hindu</option>
                                <option value="jewish">Jewish</option>
                                <option value="muslim">Muslim</option>
                                <option value="spiritual">Spiritual</option>
                            </select>
                        </div>
                        
                        <div class="pref-item">
                            <label>Looking For</label>
                            <div class="chip-selector" id="prefLookingFor">
                                <button class="chip active" onclick="togglePrefChip(this, 'lookingFor')" data-value="any">Any</button>
                                <button class="chip" onclick="togglePrefChip(this, 'lookingFor')" data-value="relationship">ðŸ’• Long-term relationship</button>
                                <button class="chip" onclick="togglePrefChip(this, 'lookingFor')" data-value="casual">ðŸ˜Š Something casual</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reset Button -->
                    <button class="btn btn-secondary btn-block" onclick="resetMatchPreferences()">
                        Reset to Default
                    </button>
                </div>
            </div>
            
            <!-- Adjust Preferences Screen -->
            <div class="screen adjust-preferences-screen" id="adjust-preferences">
                <div class="screen-header">
                    <button class="back-btn" onclick="showScreen('waiting-match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <h2 class="header-title">Adjust Preferences</h2>
                </div>
                <div class="adjust-preferences-content">
                    <!-- Available Matches Counter -->
                    <div class="available-matches-counter" id="availableMatchesCounter" style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); border-radius: 12px; padding: 16px; margin-bottom: 16px; text-align: center; color: white;">
                        <div style="font-size: 2rem; font-weight: 700;" id="availableMatchCount">0</div>
                        <div style="font-size: 0.85rem; opacity: 0.9;">profiles match your criteria</div>
                        <div style="font-size: 0.7rem; opacity: 0.7; margin-top: 4px;" id="matchCountDetails">Adjust preferences to see more</div>
                    </div>
                    
                    <div class="preferences-intro">
                        <p>Update your preferences to find better matches. Changes apply immediately.</p>
                    </div>
                    
                    <div class="preference-section">
                        <label class="preference-label">I'm interested in</label>
                        <div class="toggle-group" id="interestToggle">
                            <button class="toggle-btn" data-value="women" onclick="updatePreference('interestedIn', 'women', this)">Women</button>
                            <button class="toggle-btn" data-value="men" onclick="updatePreference('interestedIn', 'men', this)">Men</button>
                            <button class="toggle-btn active" data-value="everyone" onclick="updatePreference('interestedIn', 'everyone', this)">Everyone</button>
                        </div>
                    </div>
                    
                    <div class="preference-section">
                        <label class="preference-label">Looking for</label>
                        <div class="toggle-group" id="lookingForToggle">
                            <button class="toggle-btn active" data-value="relationship" onclick="updatePreference('lookingFor', 'relationship', this)">Long-term relationship</button>
                            <button class="toggle-btn" data-value="casual" onclick="updatePreference('lookingFor', 'casual', this)">Something casual</button>
                        </div>
                    </div>
                    
                    <div class="preference-section">
                        <label class="preference-label">Age range</label>
                        <div class="range-display">
                            <span id="adjustMinAge">25</span> - <span id="adjustMaxAge">35</span> years
                        </div>
                        <div class="range-slider">
                            <div class="range-slider-track" id="adjustAgeTrack"></div>
                            <input type="range" id="adjustAgeMin" min="18" max="60" value="25" oninput="updateAdjustAgeRange()">
                            <input type="range" id="adjustAgeMax" min="18" max="60" value="35" oninput="updateAdjustAgeRange()">
                        </div>
                    </div>
                    
                    <div class="preference-section">
                        <label class="preference-label">Maximum distance</label>
                        <div class="range-display">
                            <span id="adjustDistanceValue">25</span> miles
                        </div>
                        <input type="range" id="adjustDistance" min="5" max="100" value="25" class="single-range" oninput="updateAdjustDistance()">
                    </div>
                    
                    <!-- Matching Stats -->
                    <div class="matching-stats-card">
                        <h4>Your Matching Stats</h4>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="profilesInRange">0</span>
                                <span class="stat-label">Profiles in range</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="compatibleMatches">0</span>
                                <span class="stat-label">Compatible matches</span>
                            </div>
                        </div>
                        <p class="stat-tip">ðŸ’¡ Expanding your distance or age range increases your match pool.</p>
                    </div>
                    
                    <!-- Available Profiles Preview -->
                    <div class="available-profiles-preview" id="availableProfilesPreview" style="margin-bottom: 20px;">
                        <h4 style="font-size: 0.9rem; color: var(--text-primary); margin-bottom: 12px;">
                            <span style="margin-right: 6px;">ðŸ‘€</span> Available Profiles
                        </h4>
                        <div id="profilePreviewGrid" style="display: flex; gap: 8px; overflow-x: auto; padding-bottom: 8px;">
                            <!-- Populated by JS -->
                        </div>
                        <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 8px; text-align: center;">
                            Adjust preferences above to see more profiles
                        </p>
                    </div>
                    
                    <button class="btn btn-primary" onclick="applyPreferencesAndFindMatch()">
                        Apply & Find Next Match
                    </button>
                </div>
            </div>

            <!-- No More Matches Screen -->
            <div class="screen no-matches-screen" id="no-matches">
                <div class="app-header">
                    <div class="logo-small">OITH</div>
                </div>
                <div class="no-matches-content">
                    <div class="no-matches-illustration">
                        <svg width="120" height="120" viewBox="0 0 100 100" fill="none">
                            <circle cx="50" cy="50" r="45" stroke="var(--accent)" stroke-width="2" stroke-dasharray="8 4" opacity="0.3">
                                <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="20s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="50" cy="50" r="35" fill="var(--accent-light)"/>
                            <!-- Bird searching -->
                            <g>
                            <ellipse cx="50" cy="45" rx="14" ry="10" fill="var(--accent)" opacity="0.6"/>
                            <circle cx="60" cy="38" r="7" fill="var(--accent)" opacity="0.6"/>
                            <path d="M67 38 L74 36 L67 41Z" fill="#A84639" opacity="0.6"/>
                                <animateTransform attributeName="transform" type="translate" values="0,0; 2,-1; 0,0; -2,1; 0,0" dur="2s" repeatCount="indefinite"/>
                            </g>
                            <!-- Search icon with pulse -->
                            <circle cx="45" cy="55" r="12" stroke="var(--accent)" stroke-width="3" fill="none">
                                <animate attributeName="r" values="12;14;12" dur="1.5s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="1;0.6;1" dur="1.5s" repeatCount="indefinite"/>
                            </circle>
                            <path d="M53 63 L62 72" stroke="var(--accent)" stroke-width="3" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h2>Still Searching...</h2>
                    <p style="margin-bottom: 8px;">We're looking for your perfect match! No compatible profiles available right now.</p>
                    <p style="font-size: 0.9rem; color: var(--text-muted);">Check back soon or adjust your preferences to discover more potential matches.</p>
                    
                    <!-- Animated searching dots -->
                    <div class="searching-animation" style="display: flex; align-items: center; justify-content: center; gap: 8px; margin: 20px 0; color: var(--accent);">
                        <span style="animation: pulse 1.2s ease-in-out infinite;">â—</span>
                        <span style="animation: pulse 1.2s ease-in-out infinite 0.2s;">â—</span>
                        <span style="animation: pulse 1.2s ease-in-out infinite 0.4s;">â—</span>
                        <span style="font-weight: 500; margin-left: 8px;">Searching for matches</span>
                    </div>
                    
                    <div class="no-matches-actions">
                        <button class="btn btn-primary" onclick="showScreen('adjust-preferences')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="21" x2="4" y2="14"/>
                                <line x1="4" y1="10" x2="4" y2="3"/>
                                <line x1="12" y1="21" x2="12" y2="12"/>
                                <line x1="12" y1="8" x2="12" y2="3"/>
                                <line x1="20" y1="21" x2="20" y2="16"/>
                                <line x1="20" y1="12" x2="20" y2="3"/>
                            </svg>
                            Adjust Preferences
                        </button>
                        <button class="btn btn-secondary" onclick="presentMatch()">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 4v6h-6"/>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                            Check Again
                        </button>
                    </div>
                    
                    <div class="expand-tips">
                        <h4>Tips to find more matches:</h4>
                        <ul>
                            <li>ðŸ“ Increase your distance range</li>
                            <li>ðŸ“… Expand your age preferences</li>
                            <li>ðŸ’« Be open to different relationship goals</li>
                        </ul>
                    </div>
                </div>
                <nav class="bottom-nav">
                    <button class="nav-btn active" onclick="showScreen('match')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                        <span>Match</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('chat-list')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        <span>Chat</span>
                    </button>
                    <button class="nav-btn" onclick="showScreen('my-profile')">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Profile</span>
                    </button>
                </nav>
            </div>
        </div>
    </div>

    <script src="app.js?v=30"></script>
    <script>
        // Quick login helper - run in console if having login issues
        window.quickLogin = function() {
            const email = 'test@test.com';
            const password = 'test123';
            let users = JSON.parse(localStorage.getItem('oith_registered_users') || '{}');
            users[email] = { password: password, firstName: 'Test', registeredAt: new Date().toISOString() };
            localStorage.setItem('oith_registered_users', JSON.stringify(users));
            alert('Test account created!\n\nEmail: test@test.com\nPassword: test123\n\nYou can now sign in.');
        };
        console.log('ðŸ’¡ Having login issues? Run quickLogin() in console to create a test account');
    </script>
</body>
</html>

